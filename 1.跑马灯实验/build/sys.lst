ARM GAS  /tmp/ccJ1tDPK.s 			page 1


   1              		.cpu cortex-m3
   2              		.arch armv7-m
   3              		.fpu softvfp
   4              		.eabi_attribute 20, 1
   5              		.eabi_attribute 21, 1
   6              		.eabi_attribute 23, 3
   7              		.eabi_attribute 24, 1
   8              		.eabi_attribute 25, 1
   9              		.eabi_attribute 26, 1
  10              		.eabi_attribute 30, 1
  11              		.eabi_attribute 34, 1
  12              		.eabi_attribute 18, 4
  13              		.file	"sys.c"
  14              		.text
  15              	.Ltext0:
  16              		.cfi_sections	.debug_frame
  17              		.file 1 "USER/src/sys.c"
  18              		.section	.text.sys_nvic_priority_group_config,"ax",%progbits
  19              		.align	1
  20              		.syntax unified
  21              		.thumb
  22              		.thumb_func
  24              	sys_nvic_priority_group_config:
  25              	.LVL0:
  26              	.LFB66:
   1:USER/src/sys.c **** #include "sys.h"
   2:USER/src/sys.c **** 
   3:USER/src/sys.c **** /*∫Ø ˝…Í√˜*****************************************************************************************
   4:USER/src/sys.c **** /* æ≤Ã¨∫Ø ˝(Ωˆ‘⁄sys.c¿Ô√Ê”√µΩ) */
   5:USER/src/sys.c **** static void sys_nvic_priority_group_config(uint8_t group);                      /* …Ë÷√NVIC∑÷◊È */
   6:USER/src/sys.c **** /* “‘œ¬Œ™ª„±‡∫Ø ˝ */
   7:USER/src/sys.c **** static void sys_wfi_set(void);             /* ÷¥––WFI÷∏¡Ó */
   8:USER/src/sys.c **** // static void sys_intx_disable(void);        /* πÿ±’À˘”–÷–∂œ */
   9:USER/src/sys.c **** // static void sys_intx_enable(void);         /* ø™∆ÙÀ˘”–÷–∂œ */
  10:USER/src/sys.c **** // static void sys_msr_msp(uint32_t addr);    /* …Ë÷√’ª∂•µÿ÷∑ */
  11:USER/src/sys.c **** /**
  12:USER/src/sys.c ****  * @brief       …Ë÷√÷–∂œœÚ¡ø±Ì∆´“∆µÿ÷∑
  13:USER/src/sys.c ****  * @param       baseaddr: ª˘÷∑
  14:USER/src/sys.c ****  * @param       offset: ∆´“∆¡ø(±ÿ–Î «0, ªÚ’ﬂ0X100µƒ±∂ ˝)
  15:USER/src/sys.c ****  * @retval      Œﬁ
  16:USER/src/sys.c ****  */
  17:USER/src/sys.c **** void sys_nvic_set_vector_table(uint32_t baseaddr, uint32_t offset)
  18:USER/src/sys.c **** {
  19:USER/src/sys.c ****     /* …Ë÷√NVICµƒœÚ¡ø±Ì∆´“∆ºƒ¥Ê∆˜,VTORµÕ9Œª±£¡Ù,º¥[8:0]±£¡Ù */
  20:USER/src/sys.c ****     SCB->VTOR = baseaddr | (offset & (uint32_t)0xFFFFFE00);
  21:USER/src/sys.c **** }
  22:USER/src/sys.c **** 
  23:USER/src/sys.c **** /**
  24:USER/src/sys.c ****  * @brief       …Ë÷√NVIC∑÷◊È
  25:USER/src/sys.c ****  * @param       group: 0~4,π≤5◊È, œÍœ∏Ω‚ Õº˚: sys_nvic_init∫Ø ˝≤Œ ˝Àµ√˜
  26:USER/src/sys.c ****  * @retval      Œﬁ
  27:USER/src/sys.c ****  */
  28:USER/src/sys.c **** static void sys_nvic_priority_group_config(uint8_t group)
  29:USER/src/sys.c **** {
  27              		.loc 1 29 1 view -0
  28              		.cfi_startproc
  29              		@ args = 0, pretend = 0, frame = 0
ARM GAS  /tmp/ccJ1tDPK.s 			page 2


  30              		@ frame_needed = 0, uses_anonymous_args = 0
  31              		@ link register save eliminated.
  30:USER/src/sys.c ****     uint32_t temp, temp1;
  32              		.loc 1 30 5 view .LVU1
  31:USER/src/sys.c ****     temp1 = (~group) & 0x07;/* »°∫Û»˝Œª */
  33              		.loc 1 31 5 view .LVU2
  34              		.loc 1 31 14 is_stmt 0 view .LVU3
  35 0000 C343     		mvns	r3, r0
  36              	.LVL1:
  32:USER/src/sys.c ****     temp1 <<= 8;
  37              		.loc 1 32 5 is_stmt 1 view .LVU4
  38              		.loc 1 32 11 is_stmt 0 view .LVU5
  39 0002 1B02     		lsls	r3, r3, #8
  40              	.LVL2:
  41              		.loc 1 32 11 view .LVU6
  42 0004 03F4E063 		and	r3, r3, #1792
  43              	.LVL3:
  33:USER/src/sys.c ****     temp = SCB->AIRCR;      /* ∂¡»°œ»«∞µƒ…Ë÷√ */
  44              		.loc 1 33 5 is_stmt 1 view .LVU7
  45              		.loc 1 33 10 is_stmt 0 view .LVU8
  46 0008 0649     		ldr	r1, .L2
  47 000a CA68     		ldr	r2, [r1, #12]
  48              	.LVL4:
  34:USER/src/sys.c ****     temp &= 0X0000F8FF;     /* «Âø’œ»«∞∑÷◊È */
  49              		.loc 1 34 5 is_stmt 1 view .LVU9
  50              		.loc 1 34 10 is_stmt 0 view .LVU10
  51 000c 22F4E062 		bic	r2, r2, #1792
  52              	.LVL5:
  53              		.loc 1 34 10 view .LVU11
  54 0010 1204     		lsls	r2, r2, #16
  55 0012 120C     		lsrs	r2, r2, #16
  56              	.LVL6:
  35:USER/src/sys.c ****     temp |= 0X05FA0000;     /* –¥»Î‘ø≥◊ */
  57              		.loc 1 35 5 is_stmt 1 view .LVU12
  58              		.loc 1 35 10 is_stmt 0 view .LVU13
  59 0014 42F0BF62 		orr	r2, r2, #100139008
  60              	.LVL7:
  61              		.loc 1 35 10 view .LVU14
  62 0018 42F40032 		orr	r2, r2, #131072
  63              	.LVL8:
  36:USER/src/sys.c ****     temp |= temp1;
  64              		.loc 1 36 5 is_stmt 1 view .LVU15
  65              		.loc 1 36 10 is_stmt 0 view .LVU16
  66 001c 1343     		orrs	r3, r3, r2
  67              	.LVL9:
  37:USER/src/sys.c ****     SCB->AIRCR = temp;      /* …Ë÷√∑÷◊È */
  68              		.loc 1 37 5 is_stmt 1 view .LVU17
  69              		.loc 1 37 16 is_stmt 0 view .LVU18
  70 001e CB60     		str	r3, [r1, #12]
  38:USER/src/sys.c **** }
  71              		.loc 1 38 1 view .LVU19
  72 0020 7047     		bx	lr
  73              	.L3:
  74 0022 00BF     		.align	2
  75              	.L2:
  76 0024 00ED00E0 		.word	-536810240
  77              		.cfi_endproc
ARM GAS  /tmp/ccJ1tDPK.s 			page 3


  78              	.LFE66:
  80              		.section	.text.sys_clock_set,"ax",%progbits
  81              		.align	1
  82              		.syntax unified
  83              		.thumb
  84              		.thumb_func
  86              	sys_clock_set:
  87              	.LVL10:
  88              	.LFB75:
  39:USER/src/sys.c **** 
  40:USER/src/sys.c **** /**
  41:USER/src/sys.c ****  * @brief       …Ë÷√NVIC(∞¸¿®∑÷◊È/«¿’º”≈œ»º∂/◊””≈œ»º∂µ»)
  42:USER/src/sys.c ****  * @param       pprio: «¿’º”≈œ»º∂(PreemptionPriority)
  43:USER/src/sys.c ****  * @param       sprio: ◊””≈œ»º∂(SubPriority)
  44:USER/src/sys.c ****  * @param       ch: ÷–∂œ±‡∫≈(Channel)
  45:USER/src/sys.c ****  * @param       group: ÷–∂œ∑÷◊È
  46:USER/src/sys.c ****  *   @arg       0, ◊È0: 0Œª«¿’º”≈œ»º∂, 4Œª◊””≈œ»º∂
  47:USER/src/sys.c ****  *   @arg       1, ◊È1: 1Œª«¿’º”≈œ»º∂, 3Œª◊””≈œ»º∂
  48:USER/src/sys.c ****  *   @arg       2, ◊È2: 2Œª«¿’º”≈œ»º∂, 2Œª◊””≈œ»º∂
  49:USER/src/sys.c ****  *   @arg       3, ◊È3: 3Œª«¿’º”≈œ»º∂, 1Œª◊””≈œ»º∂
  50:USER/src/sys.c ****  *   @arg       4, ◊È4: 4Œª«¿’º”≈œ»º∂, 0Œª◊””≈œ»º∂
  51:USER/src/sys.c ****  * @note        ◊¢“‚”≈œ»º∂≤ªƒ‹≥¨π˝…Ë∂®µƒ◊Èµƒ∑∂Œß! ∑Ò‘Úª·”–“‚œÎ≤ªµΩµƒ¥ÌŒÛ
  52:USER/src/sys.c ****  * @retval      Œﬁ
  53:USER/src/sys.c ****  */
  54:USER/src/sys.c **** void sys_nvic_init(uint8_t pprio, uint8_t sprio, uint8_t ch, uint8_t group)
  55:USER/src/sys.c **** {
  56:USER/src/sys.c ****     uint32_t temp;
  57:USER/src/sys.c ****     sys_nvic_priority_group_config(group);  /* …Ë÷√∑÷◊È */
  58:USER/src/sys.c ****     temp = pprio << (4 - group);
  59:USER/src/sys.c ****     temp |= sprio & (0x0f >> group);
  60:USER/src/sys.c ****     temp &= 0xf;                            /* »°µÕÀƒŒª */
  61:USER/src/sys.c ****     NVIC->ISER[ch / 32] |= 1 << (ch % 32);  /*  πƒ‹÷–∂œŒª(“™«Â≥˝µƒª∞,…Ë÷√ICER∂‘”¶ŒªŒ™1º¥ø…) */
  62:USER/src/sys.c ****     NVIC->IP[ch] |= temp << 4;              /* …Ë÷√œÏ”¶”≈œ»º∂∫Õ«¿∂œ”≈œ»º∂ */
  63:USER/src/sys.c **** }
  64:USER/src/sys.c **** 
  65:USER/src/sys.c **** /**
  66:USER/src/sys.c ****  * @brief       Õ‚≤ø÷–∂œ≈‰÷√∫Ø ˝, ÷ª’Î∂‘GPIOA~GPIOG
  67:USER/src/sys.c ****  * @note        ∏√∫Ø ˝ª·◊‘∂Øø™∆Ù∂‘”¶÷–∂œ, “‘º∞∆¡±Œœﬂ
  68:USER/src/sys.c ****  * @param       p_gpiox: GPIOA~GPIOG, GPIO÷∏’Î
  69:USER/src/sys.c ****  * @param       pinx: 0X0000~0XFFFF, “˝Ω≈Œª÷√, √ø∏ˆŒª¥˙±Ì“ª∏ˆIO, µ⁄0Œª¥˙±ÌPx0, µ⁄1Œª¥˙±ÌPx1, “¿¥Œ¿‡
  70:USER/src/sys.c ****  *   @arg       SYS_GPIO_PIN0~SYS_GPIO_PIN15, 1<<0 ~ 1<<15
  71:USER/src/sys.c ****  * @param       tmode: 1~3, ¥•∑¢ƒ£ Ω
  72:USER/src/sys.c ****  *   @arg       SYS_GPIO_FTIR, 1, œ¬Ωµ—ÿ¥•∑¢
  73:USER/src/sys.c ****  *   @arg       SYS_GPIO_RTIR, 2, …œ…˝—ÿ¥•∑¢
  74:USER/src/sys.c ****  *   @arg       SYS_GPIO_BTIR, 3, »Œ“‚µÁ∆Ω¥•∑¢
  75:USER/src/sys.c ****  * @retval      Œﬁ
  76:USER/src/sys.c ****  */
  77:USER/src/sys.c **** void sys_nvic_ex_config(GPIO_TypeDef *p_gpiox, uint16_t pinx, uint8_t tmode)
  78:USER/src/sys.c **** {
  79:USER/src/sys.c ****     uint8_t offset;
  80:USER/src/sys.c ****     uint32_t gpio_num = 0;      /* gpio±‡∫≈, 0~10, ¥˙±ÌGPIOA~GPIOG */
  81:USER/src/sys.c ****     uint32_t pinpos = 0, pos = 0, curpin = 0;
  82:USER/src/sys.c **** 
  83:USER/src/sys.c ****     gpio_num = ((uint32_t)p_gpiox - (uint32_t)GPIOA) / 0X400 ;/* µ√µΩgpio±‡∫≈ */
  84:USER/src/sys.c ****     RCC->APB2ENR |= 1 << 0;     /* AFIO = 1, πƒ‹AFIO ±÷” */
  85:USER/src/sys.c **** 
  86:USER/src/sys.c ****     for (pinpos = 0; pinpos < 16; pinpos++)
ARM GAS  /tmp/ccJ1tDPK.s 			page 4


  87:USER/src/sys.c ****     {
  88:USER/src/sys.c ****         pos = 1 << pinpos;      /* “ª∏ˆ∏ˆŒªºÏ≤È */
  89:USER/src/sys.c ****         curpin = pinx & pos;    /* ºÏ≤È“˝Ω≈ «∑Ò“™…Ë÷√ */
  90:USER/src/sys.c **** 
  91:USER/src/sys.c ****         if (curpin == pos)      /* –Ë“™…Ë÷√ */
  92:USER/src/sys.c ****         {
  93:USER/src/sys.c ****             offset = (pinpos % 4) * 4;
  94:USER/src/sys.c ****             AFIO->EXTICR[pinpos / 4] &= ~(0x000F << offset);    /* «Â≥˝‘≠¿¥…Ë÷√£°£°£° */
  95:USER/src/sys.c ****             AFIO->EXTICR[pinpos / 4] |= gpio_num << offset;     /* EXTI.BITx”≥…‰µΩgpiox.bitx */
  96:USER/src/sys.c **** 
  97:USER/src/sys.c ****             EXTI->IMR |= 1 << pinpos;   /* ø™∆Ùline BITx…œµƒ÷–∂œ(»Áπ˚“™Ω˚÷π÷–∂œ£¨‘Ú∑¥≤Ÿ◊˜º¥ø…) */
  98:USER/src/sys.c **** 
  99:USER/src/sys.c ****             if (tmode & 0x01) EXTI->FTSR |= 1 << pinpos;        /* line bitx…œ ¬º˛œ¬Ωµ—ÿ¥•∑¢ */
 100:USER/src/sys.c **** 
 101:USER/src/sys.c ****             if (tmode & 0x02) EXTI->RTSR |= 1 << pinpos;        /* line bitx…œ ¬º˛…œ…˝Ωµ—ÿ¥•∑¢ */
 102:USER/src/sys.c ****         }
 103:USER/src/sys.c ****     }
 104:USER/src/sys.c **** }
 105:USER/src/sys.c **** 
 106:USER/src/sys.c **** /**
 107:USER/src/sys.c ****  * @brief       GPIO÷ÿ”≥…‰π¶ƒ‹—°‘Ò…Ë÷√
 108:USER/src/sys.c ****  *   @note      ’‚¿ÔΩˆ÷ß≥÷∂‘MAPRºƒ¥Ê∆˜µƒ≈‰÷√, ≤ª÷ß≥÷∂‘MAPR2ºƒ¥Ê∆˜µƒ≈‰÷√!!!
 109:USER/src/sys.c ****  * @param       pos: ‘⁄AFIO_MAPRºƒ¥Ê∆˜¿Ô√Êµƒ∆ ºŒª÷√, 0~24
 110:USER/src/sys.c ****  *   @arg       [0]    , SPI1_REMAP;         [1]    , I2C1_REMAP;         [2]    , USART1_REMAP;   
 111:USER/src/sys.c ****  *   @arg       [5:4]  , USART3_REMAP;       [7:6]  , TIM1_REMAP;         [9:8]  , TIM2_REMAP;     
 112:USER/src/sys.c ****  *   @arg       [12]   , TIM4_REMAP;         [14:13], CAN_REMAP;          [15]   , PD01_REMAP;     
 113:USER/src/sys.c ****  *   @arg       [17]   , ADC1_ETRGINJ_REMAP; [18]   , ADC1_ETRGREG_REMAP; [19]   , ADC2_ETRGINJ_REM
 114:USER/src/sys.c ****  *   @arg       [26:24], SWJ_CFG;
 115:USER/src/sys.c ****  * @param       bit: ’º”√∂‡…ŸŒª, 1 ~ 3, œÍº˚pos≤Œ ˝Àµ√˜
 116:USER/src/sys.c ****  * @param       val: “™…Ë÷√µƒ∏¥”√π¶ƒ‹, 0 ~ 4, µ√∏˘æ›posŒª ˝æˆ∂®, œÍœ∏µƒ…Ë÷√÷µ, ≤Œº˚: <<STM32÷–Œƒ≤Œø
 117:USER/src/sys.c ****  *              »Á: sys_gpio_remap_set(24, 3, 2); ‘Ú «…Ë÷√SWJ_CFG[2:0]    = 2, —°‘Òπÿ±’JTAG, ø™∆ÙSW
 118:USER/src/sys.c ****  *                  sys_gpio_remap_set(10, 2, 2); ‘Ú «…Ë÷√TIM3_REMAP[1:0] = 2, TIM3—°‘Ò≤ø∑÷÷ÿ”≥…‰, 
 119:USER/src/sys.c ****  * @retval      Œﬁ
 120:USER/src/sys.c ****  */
 121:USER/src/sys.c **** void sys_gpio_remap_set(uint8_t pos, uint8_t bit, uint8_t val)
 122:USER/src/sys.c **** {
 123:USER/src/sys.c ****     uint32_t temp = 0;
 124:USER/src/sys.c ****     uint8_t i = 0;
 125:USER/src/sys.c ****     RCC->APB2ENR |= 1 << 0;     /* ø™∆Ù∏®÷˙ ±÷” */
 126:USER/src/sys.c **** 
 127:USER/src/sys.c ****     for (i = 0; i < bit; i++)   /* ÃÓ≥‰bit∏ˆ1 */
 128:USER/src/sys.c ****     {
 129:USER/src/sys.c ****         temp <<= 1;
 130:USER/src/sys.c ****         temp += 1;
 131:USER/src/sys.c ****     }
 132:USER/src/sys.c **** 
 133:USER/src/sys.c ****     AFIO->MAPR &= ~(temp << pos);       /* «Â≥˝MAPR∂‘”¶Œª÷√‘≠¿¥µƒ…Ë÷√ */
 134:USER/src/sys.c ****     AFIO->MAPR |= (uint32_t)val << pos; /* …Ë÷√MAPR∂‘”¶Œª÷√µƒ÷µ */
 135:USER/src/sys.c **** }
 136:USER/src/sys.c **** 
 137:USER/src/sys.c **** /**
 138:USER/src/sys.c ****  * @brief       GPIOÕ®”√…Ë÷√
 139:USER/src/sys.c ****  * @param       p_gpiox: GPIOA~GPIOG, GPIO÷∏’Î
 140:USER/src/sys.c ****  * @param       pinx: 0X0000~0XFFFF, “˝Ω≈Œª÷√, √ø∏ˆŒª¥˙±Ì“ª∏ˆIO, µ⁄0Œª¥˙±ÌPx0, µ⁄1Œª¥˙±ÌPx1, “¿¥Œ¿‡
 141:USER/src/sys.c ****  *   @arg       SYS_GPIO_PIN0~SYS_GPIO_PIN15, 1<<0 ~ 1<<15
 142:USER/src/sys.c ****  *
 143:USER/src/sys.c ****  * @param       mode: 0~3; ƒ£ Ω—°‘Ò, …Ë÷√»Áœ¬:
ARM GAS  /tmp/ccJ1tDPK.s 			page 5


 144:USER/src/sys.c ****  *   @arg       SYS_GPIO_MODE_IN,  0,  ‰»Îƒ£ Ω(œµÕ≥∏¥Œªƒ¨»œ◊¥Ã¨)
 145:USER/src/sys.c ****  *   @arg       SYS_GPIO_MODE_OUT, 1,  ‰≥ˆƒ£ Ω
 146:USER/src/sys.c ****  *   @arg       SYS_GPIO_MODE_AF,  2, ∏¥”√π¶ƒ‹ƒ£ Ω
 147:USER/src/sys.c ****  *   @arg       SYS_GPIO_MODE_AIN, 3, ƒ£ƒ‚ ‰»Îƒ£ Ω
 148:USER/src/sys.c ****  *
 149:USER/src/sys.c ****  * @param       otype: 0 / 1;  ‰≥ˆ¿‡–Õ—°‘Ò, …Ë÷√»Áœ¬:
 150:USER/src/sys.c ****  *   @arg       SYS_GPIO_OTYPE_PP, 0, Õ∆ÕÏ ‰≥ˆ
 151:USER/src/sys.c ****  *   @arg       SYS_GPIO_OTYPE_OD, 1, ø™¬© ‰≥ˆ
 152:USER/src/sys.c ****  *
 153:USER/src/sys.c ****  * @param       ospeed: 0~2;  ‰≥ˆÀŸ∂», …Ë÷√»Áœ¬(◊¢“‚: ≤ªƒ‹Œ™0!!):
 154:USER/src/sys.c ****  *   @arg       SYS_GPIO_SPEED_LOW,  2, µÕÀŸ
 155:USER/src/sys.c ****  *   @arg       SYS_GPIO_SPEED_MID,  1, ÷–ÀŸ
 156:USER/src/sys.c ****  *   @arg       SYS_GPIO_SPEED_HIGH, 3, ∏ﬂÀŸ
 157:USER/src/sys.c ****  *
 158:USER/src/sys.c ****  * @param       pupd: 0~3: …œœ¬¿≠…Ë÷√, …Ë÷√»Áœ¬:
 159:USER/src/sys.c ****  *   @arg       SYS_GPIO_PUPD_NONE, 0, ≤ª¥¯…œœ¬¿≠
 160:USER/src/sys.c ****  *   @arg       SYS_GPIO_PUPD_PU,   1, …œ¿≠
 161:USER/src/sys.c ****  *   @arg       SYS_GPIO_PUPD_PD,   2, œ¬¿≠
 162:USER/src/sys.c ****  *   @arg       SYS_GPIO_PUPD_RES,  3, ±£¡Ù
 163:USER/src/sys.c ****  *
 164:USER/src/sys.c ****  * @note:       ◊¢“‚:
 165:USER/src/sys.c ****  *              1, ‘⁄ ‰»Îƒ£ Ω(∆’Õ® ‰»Î/ƒ£ƒ‚ ‰»Î)œ¬, otype ∫Õ ospeed ≤Œ ˝Œﬁ–ß!!
 166:USER/src/sys.c ****  *              2, ‘⁄ ‰≥ˆƒ£ Ωœ¬, pupd ≤Œ ˝Œﬁ–ß!!(ø™¬© ‰≥ˆŒﬁ∑® π”√ƒ⁄≤ø…œ¿≠µÁ◊Ë!!)
 167:USER/src/sys.c ****  * @retval      Œﬁ
 168:USER/src/sys.c ****  */
 169:USER/src/sys.c **** void sys_gpio_set(GPIO_TypeDef *p_gpiox, uint16_t pinx, uint32_t mode, uint32_t otype, uint32_t osp
 170:USER/src/sys.c **** {
 171:USER/src/sys.c ****     uint32_t pinpos = 0, pos = 0, curpin = 0;
 172:USER/src/sys.c ****     uint32_t config = 0;        /* ”√”⁄±£¥Êƒ≥“ª∏ˆIOµƒ…Ë÷√(CNF[1:0] + MODE[1:0]),÷ª”√¡À∆‰◊ÓµÕ4Œª */
 173:USER/src/sys.c **** 
 174:USER/src/sys.c ****     for (pinpos = 0; pinpos < 16; pinpos++)
 175:USER/src/sys.c ****     {
 176:USER/src/sys.c ****         pos = 1 << pinpos;      /* “ª∏ˆ∏ˆŒªºÏ≤È */
 177:USER/src/sys.c ****         curpin = pinx & pos;    /* ºÏ≤È“˝Ω≈ «∑Ò“™…Ë÷√ */
 178:USER/src/sys.c **** 
 179:USER/src/sys.c ****         if (curpin == pos)      /* –Ë“™…Ë÷√ */
 180:USER/src/sys.c ****         {
 181:USER/src/sys.c ****             config = 0;         /* bit0~3∂º…Ë÷√Œ™0, º¥CNF[1:0] = 0; MODE[1:0] = 0;  ƒ¨»œ «ƒ£ƒ‚ ‰»Îƒ
 182:USER/src/sys.c **** 
 183:USER/src/sys.c ****             if ((mode == 0X01) || (mode == 0X02))   /* »Áπ˚ «∆’Õ® ‰≥ˆƒ£ Ω/∏¥”√π¶ƒ‹ƒ£ Ω */
 184:USER/src/sys.c ****             {
 185:USER/src/sys.c ****                 config = ospeed & 0X03;             /* …Ë÷√bit0/1 MODE[1:0] = 2/1/3 ÀŸ∂»≤Œ ˝ */
 186:USER/src/sys.c ****                 config |= (otype & 0X01) << 2;      /* …Ë÷√bit2   CNF[0]    = 0/1   Õ∆ÕÏ/ø™¬© ‰≥ˆ *
 187:USER/src/sys.c ****                 config |= (mode - 1) << 3;          /* …Ë÷√bit3   CNF[1]    = 0/1   ∆’Õ®/∏¥”√ ‰≥ˆ *
 188:USER/src/sys.c ****             }
 189:USER/src/sys.c ****             else if (mode == 0)     /* »Áπ˚ «∆’Õ® ‰»Îƒ£ Ω */
 190:USER/src/sys.c ****             {
 191:USER/src/sys.c ****                 if (pupd == 0)   /* ≤ª¥¯…œœ¬¿≠,º¥∏°ø’ ‰»Îƒ£ Ω */
 192:USER/src/sys.c ****                 {
 193:USER/src/sys.c ****                     config = 1 << 2;               /* …Ë÷√bit2/3 CNF[1:0] = 01   ∏°ø’ ‰»Îƒ£ Ω */
 194:USER/src/sys.c ****                 }
 195:USER/src/sys.c ****                 else
 196:USER/src/sys.c ****                 {
 197:USER/src/sys.c ****                     config = 1 << 3;                            /* …Ë÷√bit2/3 CNF[1:0] = 10   …œœ¬¿
 198:USER/src/sys.c ****                     p_gpiox->ODR &= ~(1 << pinpos);             /* «Â≥˝‘≠¿¥µƒ…Ë÷√ */
 199:USER/src/sys.c ****                     p_gpiox->ODR |= (pupd & 0X01) << pinpos;    /* …Ë÷√ODR = 0/1 œ¬¿≠/…œ¿≠ */
 200:USER/src/sys.c ****                 }
ARM GAS  /tmp/ccJ1tDPK.s 			page 6


 201:USER/src/sys.c ****             }
 202:USER/src/sys.c **** 
 203:USER/src/sys.c ****             /* ∏˘æ›IOø⁄Œª÷√ …Ë÷√CRL / CRHºƒ¥Ê∆˜ */
 204:USER/src/sys.c ****             if (pinpos <= 7)
 205:USER/src/sys.c ****             {
 206:USER/src/sys.c ****                 p_gpiox->CRL &= ~(0X0F << (pinpos * 4));        /* «Â≥˝‘≠¿¥µƒ…Ë÷√ */
 207:USER/src/sys.c ****                 p_gpiox->CRL |= config << (pinpos * 4);         /* …Ë÷√CNFx[1:0] ∫Õ MODEx[1:0], x =
 208:USER/src/sys.c ****             }
 209:USER/src/sys.c ****             else
 210:USER/src/sys.c ****             {
 211:USER/src/sys.c ****                 p_gpiox->CRH &= ~(0X0F << ((pinpos - 8) * 4));  /* «Â≥˝‘≠¿¥µƒ…Ë÷√ */
 212:USER/src/sys.c ****                 p_gpiox->CRH |= config << ((pinpos - 8) * 4);   /* …Ë÷√CNFx[1:0] ∫Õ MODEx[1:0], x =
 213:USER/src/sys.c **** 
 214:USER/src/sys.c ****             }
 215:USER/src/sys.c ****         }
 216:USER/src/sys.c ****     }
 217:USER/src/sys.c **** }
 218:USER/src/sys.c **** 
 219:USER/src/sys.c **** /**
 220:USER/src/sys.c ****  * @brief       …Ë÷√GPIOƒ≥∏ˆ“˝Ω≈µƒ ‰≥ˆ◊¥Ã¨
 221:USER/src/sys.c ****  * @param       p_gpiox: GPIOA~GPIOG, GPIO÷∏’Î
 222:USER/src/sys.c ****  * @param       0X0000~0XFFFF, “˝Ω≈Œª÷√, √ø∏ˆŒª¥˙±Ì“ª∏ˆIO, µ⁄0Œª¥˙±ÌPx0, µ⁄1Œª¥˙±ÌPx1, “¿¥Œ¿‡Õ∆. ±»
 223:USER/src/sys.c ****  *   @arg       SYS_GPIO_PIN0~SYS_GPIO_PIN15, 1<<0 ~ 1<<15
 224:USER/src/sys.c ****  * @param       status: 0/1, “˝Ω≈◊¥Ã¨(Ωˆ◊ÓµÕŒª”––ß), …Ë÷√»Áœ¬:
 225:USER/src/sys.c ****  *   @arg       0,  ‰≥ˆµÕµÁ∆Ω
 226:USER/src/sys.c ****  *   @arg       1,  ‰≥ˆ∏ﬂµÁ∆Ω
 227:USER/src/sys.c ****  * @retval      Œﬁ
 228:USER/src/sys.c ****  */
 229:USER/src/sys.c **** void sys_gpio_pin_set(GPIO_TypeDef *p_gpiox, uint16_t pinx, uint8_t status)
 230:USER/src/sys.c **** {
 231:USER/src/sys.c ****     if (status & 0X01)
 232:USER/src/sys.c ****     {
 233:USER/src/sys.c ****         p_gpiox->BSRR |= pinx;  /* …Ë÷√GPIOxµƒpinxŒ™1 */
 234:USER/src/sys.c ****     }
 235:USER/src/sys.c ****     else
 236:USER/src/sys.c ****     {
 237:USER/src/sys.c ****         p_gpiox->BSRR |= (uint32_t)pinx << 16;  /* …Ë÷√GPIOxµƒpinxŒ™0 */
 238:USER/src/sys.c ****     }
 239:USER/src/sys.c **** }
 240:USER/src/sys.c **** 
 241:USER/src/sys.c **** /**
 242:USER/src/sys.c ****  * @brief       ∂¡»°GPIOƒ≥∏ˆ“˝Ω≈µƒ◊¥Ã¨
 243:USER/src/sys.c ****  * @param       p_gpiox: GPIOA~GPIOG, GPIO÷∏’Î
 244:USER/src/sys.c ****  * @param       0X0000~0XFFFF, “˝Ω≈Œª÷√, √ø∏ˆŒª¥˙±Ì“ª∏ˆIO, µ⁄0Œª¥˙±ÌPx0, µ⁄1Œª¥˙±ÌPx1, “¿¥Œ¿‡Õ∆. ±»
 245:USER/src/sys.c ****  *   @arg       SYS_GPIO_PIN0~SYS_GPIO_PIN15, 1<<0 ~ 1<<15
 246:USER/src/sys.c ****  * @retval      ∑µªÿ“˝Ω≈◊¥Ã¨, 0, µÕµÁ∆Ω; 1, ∏ﬂµÁ∆Ω
 247:USER/src/sys.c ****  */
 248:USER/src/sys.c **** uint8_t sys_gpio_pin_get(GPIO_TypeDef *p_gpiox, uint16_t pinx)
 249:USER/src/sys.c **** {
 250:USER/src/sys.c ****     if (p_gpiox->IDR & pinx)
 251:USER/src/sys.c ****     {
 252:USER/src/sys.c ****         return 1;   /* pinxµƒ◊¥Ã¨Œ™1 */
 253:USER/src/sys.c ****     }
 254:USER/src/sys.c ****     else
 255:USER/src/sys.c ****     {
 256:USER/src/sys.c ****         return 0;   /* pinxµƒ◊¥Ã¨Œ™0 */
 257:USER/src/sys.c ****     }
ARM GAS  /tmp/ccJ1tDPK.s 			page 7


 258:USER/src/sys.c **** }
 259:USER/src/sys.c **** 
 260:USER/src/sys.c **** /**
 261:USER/src/sys.c ****  * @brief       Ω¯»Î¥˝ª˙ƒ£ Ω
 262:USER/src/sys.c ****  * @param       Œﬁ
 263:USER/src/sys.c ****  * @retval      Œﬁ
 264:USER/src/sys.c ****  */
 265:USER/src/sys.c **** void sys_standby(void)
 266:USER/src/sys.c **** {
 267:USER/src/sys.c ****     RCC->APB1ENR |= 1 << 28;    /*  πƒ‹µÁ‘¥ ±÷” */
 268:USER/src/sys.c ****     PWR->CSR |= 1 << 8;         /* …Ë÷√WKUP”√”⁄ªΩ–— */
 269:USER/src/sys.c ****     PWR->CR |= 1 << 2;          /* «Â≥˝WKUP ±Í÷æ */
 270:USER/src/sys.c ****     PWR->CR |= 1 << 1;          /* PDDS = 1, ‘ –ÌΩ¯»Î…Ó∂»ÀØ√ﬂƒ£ Ω(PDDS) */
 271:USER/src/sys.c ****     SCB->SCR |= 1 << 2;         /*  πƒ‹SLEEPDEEPŒª (SYS->CTRL) */
 272:USER/src/sys.c ****     sys_wfi_set();              /* ÷¥––WFI÷∏¡Ó, Ω¯»Î¥˝ª˙ƒ£ Ω */
 273:USER/src/sys.c **** }
 274:USER/src/sys.c **** 
 275:USER/src/sys.c **** /**
 276:USER/src/sys.c ****  * @brief       œµÕ≥»Ì∏¥Œª
 277:USER/src/sys.c ****  * @param       Œﬁ
 278:USER/src/sys.c ****  * @retval      Œﬁ
 279:USER/src/sys.c ****  */
 280:USER/src/sys.c **** void sys_soft_reset(void)
 281:USER/src/sys.c **** {
 282:USER/src/sys.c ****     SCB->AIRCR = 0X05FA0000 | (uint32_t)0x04;
 283:USER/src/sys.c **** }
 284:USER/src/sys.c **** 
 285:USER/src/sys.c **** /**
 286:USER/src/sys.c ****  * @brief        ±÷”…Ë÷√∫Ø ˝
 287:USER/src/sys.c ****  * @param       plln: PLL±∂∆µœµ ˝(PLL±∂∆µ), »°÷µ∑∂Œß: 2~16
 288:USER/src/sys.c ****  * @note
 289:USER/src/sys.c ****  *
 290:USER/src/sys.c ****  *              PLLCLK: PLL ‰≥ˆ ±÷”
 291:USER/src/sys.c ****  *              PLLSRC: PLL ‰»Î ±÷”∆µ¬ , ø…“‘ « HSI/2, HSE/2, HSEµ», “ª∞„—°‘ÒHSE.
 292:USER/src/sys.c ****  *              SYSCLK: œµÕ≥ ±÷”, ø…—°¿¥◊‘ HSI/PLLCLK/HSE, “ª∞„—°‘Ò¿¥◊‘PLLCLK
 293:USER/src/sys.c ****  *              FCLK  : Cortex M3ƒ⁄∫À ±÷”, µ»”⁄HCLK
 294:USER/src/sys.c ****  *              HCLK  : AHB◊‹œﬂ ±÷”, ¿¥◊‘ SYSCLK µƒ∑÷∆µ, ø…“‘ «1...512∑÷∆µ, “ª∞„≤ª∑÷∆µ
 295:USER/src/sys.c ****  *              PCLK2 : APB2◊‹œﬂ ±÷”, ¿¥◊‘ HCLK µƒ∑÷∆µ(◊Ó¥Û72Mhz), ø…“‘ «1/2/4/8/16∑÷∆µ, “ª∞„≤ª∑÷∆µ
 296:USER/src/sys.c ****  *              PCLK1 : APB1◊‹œﬂ ±÷”, ¿¥◊‘ HCLK µƒ∑÷∆µ(◊Ó¥Û36Mhz), ø…“‘ «1/2/4/8/16∑÷∆µ, “ª∞„∂˛∑÷∆µ
 297:USER/src/sys.c ****  *
 298:USER/src/sys.c ****  *              PLLCLK = PLLSRC * plln;
 299:USER/src/sys.c ****  *              FCLK = HCLK = SYSCLK;
 300:USER/src/sys.c ****  *              PCLK2 = HCLK;
 301:USER/src/sys.c ****  *              PCLK1 = HCLK / 2;
 302:USER/src/sys.c ****  *
 303:USER/src/sys.c ****  *              Œ“√«“ª∞„—°‘ÒPLLSRC¿¥◊‘HSE, º¥¿¥◊‘Õ‚≤øæß’Ò.
 304:USER/src/sys.c ****  *              µ±Õ‚≤øæß’ÒŒ™ 8Mµƒ ±∫Ú, Õ∆ºˆ: plln = 9, AHB≤ª∑÷∆µ, µ√µΩ:
 305:USER/src/sys.c ****  *              PLLCLK = 8 * 9 = 72Mhz
 306:USER/src/sys.c ****  *              FCLK = HCLK = SYSCLK = PLLCLK / 1 = 72Mhz
 307:USER/src/sys.c ****  *              PCLK2 = HCLK = 72Mhz
 308:USER/src/sys.c ****  *              PCLK1 = HCLK / 2 = 36Mhz
 309:USER/src/sys.c ****  *
 310:USER/src/sys.c ****  *              πÿ”⁄STM32F103µƒPLLÀµ√˜œÍº˚: <<STM32÷–Œƒ≤Œøº ÷≤· V10>>µ⁄¡˘’¬œ‡πÿƒ⁄»›
 311:USER/src/sys.c ****  *
 312:USER/src/sys.c ****  * @retval      ¥ÌŒÛ¥˙¬Î: 0, ≥…π¶; 1, HSE¥ÌŒÛ;
 313:USER/src/sys.c ****  */
 314:USER/src/sys.c **** static uint8_t sys_clock_set(uint32_t plln)
ARM GAS  /tmp/ccJ1tDPK.s 			page 8


 315:USER/src/sys.c **** {
  89              		.loc 1 315 1 is_stmt 1 view -0
  90              		.cfi_startproc
  91              		@ args = 0, pretend = 0, frame = 0
  92              		@ frame_needed = 0, uses_anonymous_args = 0
  93              		@ link register save eliminated.
 316:USER/src/sys.c ****     RCC->CR |= 1 << 16;    			 			// Õ‚≤ø∏ﬂÀŸ ±÷” πƒ‹HSEON
  94              		.loc 1 316 5 view .LVU21
  95              		.loc 1 316 8 is_stmt 0 view .LVU22
  96 0000 194A     		ldr	r2, .L8
  97 0002 1368     		ldr	r3, [r2]
  98              		.loc 1 316 13 view .LVU23
  99 0004 43F48033 		orr	r3, r3, #65536
 100 0008 1360     		str	r3, [r2]
 317:USER/src/sys.c ****     // ‘⁄’˝µ„‘≠◊”µƒ¿˝≥Ã÷–’‚¿Ôª·”–“ª∏ˆ—” ±£¨”√¿¥–ﬁ∏ƒMDKµƒbug£¨”…”⁄Œ“≤ª «”√µƒMDKø™∑¢£¨À˘“‘…æ≥˝—” ±µƒ¥
 318:USER/src/sys.c ****     while ((RCC->CR & (1 << 17)) == 0);    		//µ»¥˝Õ‚≤ø’Òµ¥∆˜Œ»∂®
 101              		.loc 1 318 5 is_stmt 1 view .LVU24
 102              	.L5:
 103              		.loc 1 318 34 discriminator 1 view .LVU25
 104              		.loc 1 318 16 is_stmt 0 discriminator 1 view .LVU26
 105 000a 174B     		ldr	r3, .L8
 106 000c 1B68     		ldr	r3, [r3]
 107              		.loc 1 318 34 discriminator 1 view .LVU27
 108 000e 13F4003F 		tst	r3, #131072
 109 0012 FAD0     		beq	.L5
 319:USER/src/sys.c ****     RCC->CFGR = 0B100 << 10;              		// APB1◊‹œﬂ‘§∑÷∆µŒ™2£¨APB2≤ª∑÷∆µ
 110              		.loc 1 319 5 is_stmt 1 view .LVU28
 111              		.loc 1 319 15 is_stmt 0 view .LVU29
 112 0014 144B     		ldr	r3, .L8
 113 0016 4FF48052 		mov	r2, #4096
 114 001a 5A60     		str	r2, [r3, #4]
 320:USER/src/sys.c ****     plln -= 2;                           		// µ÷œ˚2∏ˆµ•Œª(“ÚŒ™ «¥”2ø™ ºµƒ, …Ë÷√0æÕ «2)
 115              		.loc 1 320 5 is_stmt 1 view .LVU30
 116              		.loc 1 320 10 is_stmt 0 view .LVU31
 117 001c 0238     		subs	r0, r0, #2
 118              	.LVL11:
 321:USER/src/sys.c ****     RCC->CFGR |= plln << 18;    		 		// …Ë÷√PLL÷µ 2~16
 119              		.loc 1 321 5 is_stmt 1 view .LVU32
 120              		.loc 1 321 8 is_stmt 0 view .LVU33
 121 001e 5A68     		ldr	r2, [r3, #4]
 122              		.loc 1 321 15 view .LVU34
 123 0020 42EA8042 		orr	r2, r2, r0, lsl #18
 124 0024 5A60     		str	r2, [r3, #4]
 322:USER/src/sys.c ****     RCC->CFGR |= 1 << 16;                		// —°‘ÒÕ‚≤ø∏ﬂÀŸ ±÷”HSE◊˜Œ™À¯œ‡ª∑PLL ‰»Î ±÷”
 125              		.loc 1 322 5 is_stmt 1 view .LVU35
 126              		.loc 1 322 8 is_stmt 0 view .LVU36
 127 0026 5A68     		ldr	r2, [r3, #4]
 128              		.loc 1 322 15 view .LVU37
 129 0028 42F48032 		orr	r2, r2, #65536
 130 002c 5A60     		str	r2, [r3, #4]
 323:USER/src/sys.c **** 
 324:USER/src/sys.c ****     // FLASH_ACRºƒ¥Ê∆˜µƒ√Ë ˆœÍº˚: <<STM32F10xx…¡¥Ê±‡≥Ã ÷≤·>>
 325:USER/src/sys.c ****     FLASH->ACR = 1 << 4;        		 		// PRFTBE = 1 ø™∆Ù‘§»°ª∫≥Â«¯
 131              		.loc 1 325 5 is_stmt 1 view .LVU38
 132              		.loc 1 325 16 is_stmt 0 view .LVU39
 133 002e 0F4A     		ldr	r2, .L8+4
 134 0030 1021     		movs	r1, #16
ARM GAS  /tmp/ccJ1tDPK.s 			page 9


 135 0032 1160     		str	r1, [r2]
 326:USER/src/sys.c ****     FLASH->ACR |= 2 << 0;       		 		// LATENCY[2:0] = 2 FLASH¡Ω∏ˆµ»¥˝÷‹∆⁄
 136              		.loc 1 326 5 is_stmt 1 view .LVU40
 137              		.loc 1 326 10 is_stmt 0 view .LVU41
 138 0034 1168     		ldr	r1, [r2]
 139              		.loc 1 326 16 view .LVU42
 140 0036 41F00201 		orr	r1, r1, #2
 141 003a 1160     		str	r1, [r2]
 327:USER/src/sys.c **** 
 328:USER/src/sys.c ****     RCC->CR |= 1 << 24;         		 		// PLLON = 1,  πƒ‹PLL
 142              		.loc 1 328 5 is_stmt 1 view .LVU43
 143              		.loc 1 328 8 is_stmt 0 view .LVU44
 144 003c 1A68     		ldr	r2, [r3]
 145              		.loc 1 328 13 view .LVU45
 146 003e 42F08072 		orr	r2, r2, #16777216
 147 0042 1A60     		str	r2, [r3]
 329:USER/src/sys.c ****     while (!(RCC->CR >> 25));   		 		// µ»¥˝PLLÀ¯∂®
 148              		.loc 1 329 5 is_stmt 1 view .LVU46
 149              	.L6:
 150              		.loc 1 329 12 discriminator 1 view .LVU47
 151              		.loc 1 329 17 is_stmt 0 discriminator 1 view .LVU48
 152 0044 084B     		ldr	r3, .L8
 153 0046 1B68     		ldr	r3, [r3]
 154              		.loc 1 329 12 discriminator 1 view .LVU49
 155 0048 5B0E     		lsrs	r3, r3, #25
 156 004a FBD0     		beq	.L6
 330:USER/src/sys.c ****     RCC->CFGR |= 2 << 0;                 		// SW[1:0] = 2, —°‘ÒPLL ‰≥ˆ◊˜Œ™œµÕ≥ ±÷”
 157              		.loc 1 330 5 is_stmt 1 view .LVU50
 158              		.loc 1 330 8 is_stmt 0 view .LVU51
 159 004c 064A     		ldr	r2, .L8
 160 004e 5368     		ldr	r3, [r2, #4]
 161              		.loc 1 330 15 view .LVU52
 162 0050 43F00203 		orr	r3, r3, #2
 163 0054 5360     		str	r3, [r2, #4]
 331:USER/src/sys.c ****     while (((RCC->CFGR >> 2) & 0X03) != 2); 	// µ»¥˝PLL◊˜Œ™œµÕ≥ ±÷”…Ë÷√≥…π¶
 164              		.loc 1 331 5 is_stmt 1 view .LVU53
 165              	.L7:
 166              		.loc 1 331 38 discriminator 1 view .LVU54
 167              		.loc 1 331 17 is_stmt 0 discriminator 1 view .LVU55
 168 0056 044B     		ldr	r3, .L8
 169 0058 5B68     		ldr	r3, [r3, #4]
 170              		.loc 1 331 30 discriminator 1 view .LVU56
 171 005a C3F38103 		ubfx	r3, r3, #2, #2
 172              		.loc 1 331 38 discriminator 1 view .LVU57
 173 005e 022B     		cmp	r3, #2
 174 0060 F9D1     		bne	.L7
 332:USER/src/sys.c ****     return 1;
 175              		.loc 1 332 5 is_stmt 1 view .LVU58
 333:USER/src/sys.c **** }
 176              		.loc 1 333 1 is_stmt 0 view .LVU59
 177 0062 0120     		movs	r0, #1
 178              	.LVL12:
 179              		.loc 1 333 1 view .LVU60
 180 0064 7047     		bx	lr
 181              	.L9:
 182 0066 00BF     		.align	2
 183              	.L8:
ARM GAS  /tmp/ccJ1tDPK.s 			page 10


 184 0068 00100240 		.word	1073876992
 185 006c 00200240 		.word	1073881088
 186              		.cfi_endproc
 187              	.LFE75:
 189              		.section	.text.sys_wfi_set,"ax",%progbits
 190              		.align	1
 191              		.syntax unified
 192              		.thumb
 193              		.thumb_func
 195              	sys_wfi_set:
 196              	.LFB77:
 334:USER/src/sys.c **** 
 335:USER/src/sys.c **** /**
 336:USER/src/sys.c ****  * @brief       œµÕ≥ ±÷”≥ı ºªØ∫Ø ˝
 337:USER/src/sys.c ****  * @param       plln: PLL±∂∆µœµ ˝(PLL±∂∆µ), »°÷µ∑∂Œß: 2~16
 338:USER/src/sys.c ****  * @retval      Œﬁ
 339:USER/src/sys.c ****  */
 340:USER/src/sys.c **** void sys_stm32_clock_init(uint32_t plln)
 341:USER/src/sys.c **** {
 342:USER/src/sys.c ****     RCC->APB1RSTR = 0x00000000;     /* ∏¥ŒªΩ· ¯ */
 343:USER/src/sys.c ****     RCC->APB2RSTR = 0x00000000;
 344:USER/src/sys.c ****     
 345:USER/src/sys.c ****     // RCC->AHBENR = 0x00000014;       /* ÀØ√ﬂƒ£ Ω…¡¥Ê∫ÕSRAM ±÷” πƒ‹.∆‰À˚πÿ±’ */
 346:USER/src/sys.c ****     RCC->AHBENR = 0x00000000;       /* AHB1Õ‚…Ë ±÷”πÿ±’ */
 347:USER/src/sys.c ****     RCC->APB2ENR = 0x00000000;      /* AHB2Õ‚…Ë ±÷”πÿ±’ */
 348:USER/src/sys.c ****     RCC->APB1ENR = 0x00000000;
 349:USER/src/sys.c ****     
 350:USER/src/sys.c ****     RCC->CR |= 0x00000001;          /*  πƒ‹ƒ⁄≤ø∏ﬂÀŸ ±÷”HSION */
 351:USER/src/sys.c ****     RCC->CFGR &= 0xF8FF0000;        /* ∏¥ŒªSW[1:0], SWS[1:0], HPRE[3:0], PPRE1[2:0], PPRE2[2:0], AD
 352:USER/src/sys.c ****     RCC->CR &= 0xFEF6FFFF;          /* ∏¥ŒªHSEON, CSSON, PLLON */
 353:USER/src/sys.c ****     RCC->CR &= 0xFFFBFFFF;          /* ∏¥ŒªHSEBYP */
 354:USER/src/sys.c ****     RCC->CFGR &= 0xFF80FFFF;        /* ∏¥ŒªPLLSRC, PLLXTPRE, PLLMUL[3:0] ∫Õ USBPRE/OTGFSPRE */
 355:USER/src/sys.c ****     RCC->CIR = 0x009F0000;          /* πÿ±’À˘”–RCC÷–∂œ≤¢«Â≥˝÷–∂œ±Í÷æ */
 356:USER/src/sys.c **** 
 357:USER/src/sys.c ****     sys_clock_set(plln);            /* …Ë÷√ ±÷” */
 358:USER/src/sys.c **** 
 359:USER/src/sys.c ****     /* ≈‰÷√÷–∂œœÚ¡ø∆´“∆ */
 360:USER/src/sys.c **** #ifdef  VECT_TAB_RAM
 361:USER/src/sys.c ****     sys_nvic_set_vector_table(SRAM_BASE, 0x0);
 362:USER/src/sys.c **** #else
 363:USER/src/sys.c ****     sys_nvic_set_vector_table(FLASH_BASE, 0x0);
 364:USER/src/sys.c **** #endif
 365:USER/src/sys.c **** }
 366:USER/src/sys.c **** 
 367:USER/src/sys.c **** /**
 368:USER/src/sys.c ****  * @brief       ÷¥––: WFI÷∏¡Ó(÷¥––ÕÍ∏√÷∏¡ÓΩ¯»ÎµÕπ¶∫ƒ◊¥Ã¨, µ»¥˝÷–∂œªΩ–—)
 369:USER/src/sys.c ****  * WFI is an instruction used in the ARM architecture (and other architectures as well). 
 370:USER/src/sys.c **** When a processor executes a WFI instruction, it enters a low - power state and waits for an interru
 371:USER/src/sys.c ****  * @param       Œﬁ
 372:USER/src/sys.c ****  * @retval      Œﬁ
 373:USER/src/sys.c ****  */
 374:USER/src/sys.c **** static void sys_wfi_set(void)
 375:USER/src/sys.c **** {
 197              		.loc 1 375 1 is_stmt 1 view -0
 198              		.cfi_startproc
 199              		@ args = 0, pretend = 0, frame = 0
 200              		@ frame_needed = 0, uses_anonymous_args = 0
ARM GAS  /tmp/ccJ1tDPK.s 			page 11


 201              		@ link register save eliminated.
 376:USER/src/sys.c ****     __asm__ __volatile__("wfi");
 202              		.loc 1 376 5 view .LVU62
 203              		.syntax unified
 204              	@ 376 "USER/src/sys.c" 1
 205 0000 30BF     		wfi
 206              	@ 0 "" 2
 377:USER/src/sys.c **** }
 207              		.loc 1 377 1 is_stmt 0 view .LVU63
 208              		.thumb
 209              		.syntax unified
 210 0002 7047     		bx	lr
 211              		.cfi_endproc
 212              	.LFE77:
 214              		.section	.text.sys_nvic_set_vector_table,"ax",%progbits
 215              		.align	1
 216              		.global	sys_nvic_set_vector_table
 217              		.syntax unified
 218              		.thumb
 219              		.thumb_func
 221              	sys_nvic_set_vector_table:
 222              	.LVL13:
 223              	.LFB65:
  18:USER/src/sys.c ****     /* …Ë÷√NVICµƒœÚ¡ø±Ì∆´“∆ºƒ¥Ê∆˜,VTORµÕ9Œª±£¡Ù,º¥[8:0]±£¡Ù */
 224              		.loc 1 18 1 is_stmt 1 view -0
 225              		.cfi_startproc
 226              		@ args = 0, pretend = 0, frame = 0
 227              		@ frame_needed = 0, uses_anonymous_args = 0
 228              		@ link register save eliminated.
  20:USER/src/sys.c **** }
 229              		.loc 1 20 5 view .LVU65
  20:USER/src/sys.c **** }
 230              		.loc 1 20 36 is_stmt 0 view .LVU66
 231 0000 21F4FF71 		bic	r1, r1, #510
 232              	.LVL14:
  20:USER/src/sys.c **** }
 233              		.loc 1 20 36 view .LVU67
 234 0004 21F00101 		bic	r1, r1, #1
  20:USER/src/sys.c **** }
 235              		.loc 1 20 26 view .LVU68
 236 0008 0143     		orrs	r1, r1, r0
  20:USER/src/sys.c **** }
 237              		.loc 1 20 15 view .LVU69
 238 000a 014B     		ldr	r3, .L12
 239 000c 9960     		str	r1, [r3, #8]
  21:USER/src/sys.c **** 
 240              		.loc 1 21 1 view .LVU70
 241 000e 7047     		bx	lr
 242              	.L13:
 243              		.align	2
 244              	.L12:
 245 0010 00ED00E0 		.word	-536810240
 246              		.cfi_endproc
 247              	.LFE65:
 249              		.section	.text.sys_nvic_init,"ax",%progbits
 250              		.align	1
 251              		.global	sys_nvic_init
ARM GAS  /tmp/ccJ1tDPK.s 			page 12


 252              		.syntax unified
 253              		.thumb
 254              		.thumb_func
 256              	sys_nvic_init:
 257              	.LVL15:
 258              	.LFB67:
  55:USER/src/sys.c ****     uint32_t temp;
 259              		.loc 1 55 1 is_stmt 1 view -0
 260              		.cfi_startproc
 261              		@ args = 0, pretend = 0, frame = 0
 262              		@ frame_needed = 0, uses_anonymous_args = 0
  55:USER/src/sys.c ****     uint32_t temp;
 263              		.loc 1 55 1 is_stmt 0 view .LVU72
 264 0000 F8B5     		push	{r3, r4, r5, r6, r7, lr}
 265              	.LCFI0:
 266              		.cfi_def_cfa_offset 24
 267              		.cfi_offset 3, -24
 268              		.cfi_offset 4, -20
 269              		.cfi_offset 5, -16
 270              		.cfi_offset 6, -12
 271              		.cfi_offset 7, -8
 272              		.cfi_offset 14, -4
 273 0002 0746     		mov	r7, r0
 274 0004 0C46     		mov	r4, r1
 275 0006 1646     		mov	r6, r2
 276 0008 1D46     		mov	r5, r3
  56:USER/src/sys.c ****     sys_nvic_priority_group_config(group);  /* …Ë÷√∑÷◊È */
 277              		.loc 1 56 5 is_stmt 1 view .LVU73
  57:USER/src/sys.c ****     temp = pprio << (4 - group);
 278              		.loc 1 57 5 view .LVU74
 279 000a 1846     		mov	r0, r3
 280              	.LVL16:
  57:USER/src/sys.c ****     temp = pprio << (4 - group);
 281              		.loc 1 57 5 is_stmt 0 view .LVU75
 282 000c FFF7FEFF 		bl	sys_nvic_priority_group_config
 283              	.LVL17:
  58:USER/src/sys.c ****     temp |= sprio & (0x0f >> group);
 284              		.loc 1 58 5 is_stmt 1 view .LVU76
  58:USER/src/sys.c ****     temp |= sprio & (0x0f >> group);
 285              		.loc 1 58 24 is_stmt 0 view .LVU77
 286 0010 C5F10403 		rsb	r3, r5, #4
  58:USER/src/sys.c ****     temp |= sprio & (0x0f >> group);
 287              		.loc 1 58 18 view .LVU78
 288 0014 07FA03F1 		lsl	r1, r7, r3
 289              	.LVL18:
  59:USER/src/sys.c ****     temp &= 0xf;                            /* »°µÕÀƒŒª */
 290              		.loc 1 59 5 is_stmt 1 view .LVU79
  59:USER/src/sys.c ****     temp &= 0xf;                            /* »°µÕÀƒŒª */
 291              		.loc 1 59 27 is_stmt 0 view .LVU80
 292 0018 0F23     		movs	r3, #15
 293 001a 2B41     		asrs	r3, r3, r5
  59:USER/src/sys.c ****     temp &= 0xf;                            /* »°µÕÀƒŒª */
 294              		.loc 1 59 19 view .LVU81
 295 001c 04EA0305 		and	r5, r4, r3
 296              	.LVL19:
  60:USER/src/sys.c ****     NVIC->ISER[ch / 32] |= 1 << (ch % 32);  /*  πƒ‹÷–∂œŒª(“™«Â≥˝µƒª∞,…Ë÷√ICER∂‘”¶ŒªŒ™1º¥ø…) */
 297              		.loc 1 60 5 is_stmt 1 view .LVU82
ARM GAS  /tmp/ccJ1tDPK.s 			page 13


  61:USER/src/sys.c ****     NVIC->IP[ch] |= temp << 4;              /* …Ë÷√œÏ”¶”≈œ»º∂∫Õ«¿∂œ”≈œ»º∂ */
 298              		.loc 1 61 5 view .LVU83
  61:USER/src/sys.c ****     NVIC->IP[ch] |= temp << 4;              /* …Ë÷√œÏ”¶”≈œ»º∂∫Õ«¿∂œ”≈œ»º∂ */
 299              		.loc 1 61 15 is_stmt 0 view .LVU84
 300 0020 7009     		lsrs	r0, r6, #5
 301 0022 0A4C     		ldr	r4, .L16
 302 0024 54F82030 		ldr	r3, [r4, r0, lsl #2]
  61:USER/src/sys.c ****     NVIC->IP[ch] |= temp << 4;              /* …Ë÷√œÏ”¶”≈œ»º∂∫Õ«¿∂œ”≈œ»º∂ */
 303              		.loc 1 61 37 view .LVU85
 304 0028 06F01F07 		and	r7, r6, #31
  61:USER/src/sys.c ****     NVIC->IP[ch] |= temp << 4;              /* …Ë÷√œÏ”¶”≈œ»º∂∫Õ«¿∂œ”≈œ»º∂ */
 305              		.loc 1 61 30 view .LVU86
 306 002c 0122     		movs	r2, #1
 307 002e BA40     		lsls	r2, r2, r7
  61:USER/src/sys.c ****     NVIC->IP[ch] |= temp << 4;              /* …Ë÷√œÏ”¶”≈œ»º∂∫Õ«¿∂œ”≈œ»º∂ */
 308              		.loc 1 61 25 view .LVU87
 309 0030 1343     		orrs	r3, r3, r2
 310 0032 44F82030 		str	r3, [r4, r0, lsl #2]
  62:USER/src/sys.c **** }
 311              		.loc 1 62 5 is_stmt 1 view .LVU88
  62:USER/src/sys.c **** }
 312              		.loc 1 62 13 is_stmt 0 view .LVU89
 313 0036 3444     		add	r4, r4, r6
 314 0038 94F80033 		ldrb	r3, [r4, #768]	@ zero_extendqisi2
  62:USER/src/sys.c **** }
 315              		.loc 1 62 26 view .LVU90
 316 003c 2943     		orrs	r1, r1, r5
 317              	.LVL20:
  62:USER/src/sys.c **** }
 318              		.loc 1 62 26 view .LVU91
 319 003e 01F00F01 		and	r1, r1, #15
 320              	.LVL21:
  62:USER/src/sys.c **** }
 321              		.loc 1 62 18 view .LVU92
 322 0042 43EA0113 		orr	r3, r3, r1, lsl #4
 323 0046 84F80033 		strb	r3, [r4, #768]
  63:USER/src/sys.c **** 
 324              		.loc 1 63 1 view .LVU93
 325 004a F8BD     		pop	{r3, r4, r5, r6, r7, pc}
 326              	.L17:
 327              		.align	2
 328              	.L16:
 329 004c 00E100E0 		.word	-536813312
 330              		.cfi_endproc
 331              	.LFE67:
 333              		.section	.text.sys_nvic_ex_config,"ax",%progbits
 334              		.align	1
 335              		.global	sys_nvic_ex_config
 336              		.syntax unified
 337              		.thumb
 338              		.thumb_func
 340              	sys_nvic_ex_config:
 341              	.LVL22:
 342              	.LFB68:
  78:USER/src/sys.c ****     uint8_t offset;
 343              		.loc 1 78 1 is_stmt 1 view -0
 344              		.cfi_startproc
ARM GAS  /tmp/ccJ1tDPK.s 			page 14


 345              		@ args = 0, pretend = 0, frame = 0
 346              		@ frame_needed = 0, uses_anonymous_args = 0
  78:USER/src/sys.c ****     uint8_t offset;
 347              		.loc 1 78 1 is_stmt 0 view .LVU95
 348 0000 F0B5     		push	{r4, r5, r6, r7, lr}
 349              	.LCFI1:
 350              		.cfi_def_cfa_offset 20
 351              		.cfi_offset 4, -20
 352              		.cfi_offset 5, -16
 353              		.cfi_offset 6, -12
 354              		.cfi_offset 7, -8
 355              		.cfi_offset 14, -4
  79:USER/src/sys.c ****     uint32_t gpio_num = 0;      /* gpio±‡∫≈, 0~10, ¥˙±ÌGPIOA~GPIOG */
 356              		.loc 1 79 5 is_stmt 1 view .LVU96
  80:USER/src/sys.c ****     uint32_t pinpos = 0, pos = 0, curpin = 0;
 357              		.loc 1 80 5 view .LVU97
 358              	.LVL23:
  81:USER/src/sys.c **** 
 359              		.loc 1 81 5 view .LVU98
  83:USER/src/sys.c ****     RCC->APB2ENR |= 1 << 0;     /* AFIO = 1, πƒ‹AFIO ±÷” */
 360              		.loc 1 83 5 view .LVU99
  83:USER/src/sys.c ****     RCC->APB2ENR |= 1 << 0;     /* AFIO = 1, πƒ‹AFIO ±÷” */
 361              		.loc 1 83 35 is_stmt 0 view .LVU100
 362 0002 00F14046 		add	r6, r0, #-1073741824
 363 0006 A6F58436 		sub	r6, r6, #67584
  83:USER/src/sys.c ****     RCC->APB2ENR |= 1 << 0;     /* AFIO = 1, πƒ‹AFIO ±÷” */
 364              		.loc 1 83 14 view .LVU101
 365 000a B60A     		lsrs	r6, r6, #10
 366              	.LVL24:
  84:USER/src/sys.c **** 
 367              		.loc 1 84 5 is_stmt 1 view .LVU102
  84:USER/src/sys.c **** 
 368              		.loc 1 84 8 is_stmt 0 view .LVU103
 369 000c 1D48     		ldr	r0, .L25
 370              	.LVL25:
  84:USER/src/sys.c **** 
 371              		.loc 1 84 8 view .LVU104
 372 000e 8369     		ldr	r3, [r0, #24]
  84:USER/src/sys.c **** 
 373              		.loc 1 84 18 view .LVU105
 374 0010 43F00103 		orr	r3, r3, #1
 375 0014 8361     		str	r3, [r0, #24]
  86:USER/src/sys.c ****     {
 376              		.loc 1 86 5 is_stmt 1 view .LVU106
  86:USER/src/sys.c ****     {
 377              		.loc 1 86 17 is_stmt 0 view .LVU107
 378 0016 0023     		movs	r3, #0
  86:USER/src/sys.c ****     {
 379              		.loc 1 86 5 view .LVU108
 380 0018 00E0     		b	.L19
 381              	.LVL26:
 382              	.L20:
  86:USER/src/sys.c ****     {
 383              		.loc 1 86 41 is_stmt 1 discriminator 2 view .LVU109
 384 001a 0133     		adds	r3, r3, #1
 385              	.LVL27:
 386              	.L19:
ARM GAS  /tmp/ccJ1tDPK.s 			page 15


  86:USER/src/sys.c ****     {
 387              		.loc 1 86 29 discriminator 1 view .LVU110
 388 001c 0F2B     		cmp	r3, #15
 389 001e 30D8     		bhi	.L24
  88:USER/src/sys.c ****         curpin = pinx & pos;    /* ºÏ≤È“˝Ω≈ «∑Ò“™…Ë÷√ */
 390              		.loc 1 88 9 view .LVU111
  88:USER/src/sys.c ****         curpin = pinx & pos;    /* ºÏ≤È“˝Ω≈ «∑Ò“™…Ë÷√ */
 391              		.loc 1 88 17 is_stmt 0 view .LVU112
 392 0020 0120     		movs	r0, #1
 393 0022 9840     		lsls	r0, r0, r3
 394              	.LVL28:
  89:USER/src/sys.c **** 
 395              		.loc 1 89 9 is_stmt 1 view .LVU113
  91:USER/src/sys.c ****         {
 396              		.loc 1 91 9 view .LVU114
  91:USER/src/sys.c ****         {
 397              		.loc 1 91 12 is_stmt 0 view .LVU115
 398 0024 30EA0104 		bics	r4, r0, r1
 399 0028 F7D1     		bne	.L20
  93:USER/src/sys.c ****             AFIO->EXTICR[pinpos / 4] &= ~(0x000F << offset);    /* «Â≥˝‘≠¿¥…Ë÷√£°£°£° */
 400              		.loc 1 93 13 is_stmt 1 view .LVU116
  93:USER/src/sys.c ****             AFIO->EXTICR[pinpos / 4] &= ~(0x000F << offset);    /* «Â≥˝‘≠¿¥…Ë÷√£°£°£° */
 401              		.loc 1 93 20 is_stmt 0 view .LVU117
 402 002a 03F0030E 		and	lr, r3, #3
 403 002e 4FEA8E0E 		lsl	lr, lr, #2
 404              	.LVL29:
  94:USER/src/sys.c ****             AFIO->EXTICR[pinpos / 4] |= gpio_num << offset;     /* EXTI.BITx”≥…‰µΩgpiox.bitx */
 405              		.loc 1 94 13 is_stmt 1 view .LVU118
  94:USER/src/sys.c ****             AFIO->EXTICR[pinpos / 4] |= gpio_num << offset;     /* EXTI.BITx”≥…‰µΩgpiox.bitx */
 406              		.loc 1 94 33 is_stmt 0 view .LVU119
 407 0032 4FEA930C 		lsr	ip, r3, #2
  94:USER/src/sys.c ****             AFIO->EXTICR[pinpos / 4] |= gpio_num << offset;     /* EXTI.BITx”≥…‰µΩgpiox.bitx */
 408              		.loc 1 94 25 view .LVU120
 409 0036 144C     		ldr	r4, .L25+4
 410 0038 0CF1020C 		add	ip, ip, #2
 411 003c 54F82C50 		ldr	r5, [r4, ip, lsl #2]
  94:USER/src/sys.c ****             AFIO->EXTICR[pinpos / 4] |= gpio_num << offset;     /* EXTI.BITx”≥…‰µΩgpiox.bitx */
 412              		.loc 1 94 50 view .LVU121
 413 0040 0F27     		movs	r7, #15
 414 0042 07FA0EF7 		lsl	r7, r7, lr
  94:USER/src/sys.c ****             AFIO->EXTICR[pinpos / 4] |= gpio_num << offset;     /* EXTI.BITx”≥…‰µΩgpiox.bitx */
 415              		.loc 1 94 38 view .LVU122
 416 0046 25EA0705 		bic	r5, r5, r7
 417 004a 44F82C50 		str	r5, [r4, ip, lsl #2]
  95:USER/src/sys.c **** 
 418              		.loc 1 95 13 is_stmt 1 view .LVU123
  95:USER/src/sys.c **** 
 419              		.loc 1 95 25 is_stmt 0 view .LVU124
 420 004e 54F82C50 		ldr	r5, [r4, ip, lsl #2]
  95:USER/src/sys.c **** 
 421              		.loc 1 95 50 view .LVU125
 422 0052 06FA0EFE 		lsl	lr, r6, lr
 423              	.LVL30:
  95:USER/src/sys.c **** 
 424              		.loc 1 95 38 view .LVU126
 425 0056 45EA0E05 		orr	r5, r5, lr
 426 005a 44F82C50 		str	r5, [r4, ip, lsl #2]
ARM GAS  /tmp/ccJ1tDPK.s 			page 16


  97:USER/src/sys.c **** 
 427              		.loc 1 97 13 is_stmt 1 view .LVU127
  97:USER/src/sys.c **** 
 428              		.loc 1 97 17 is_stmt 0 view .LVU128
 429 005e 0B4D     		ldr	r5, .L25+8
 430 0060 2C68     		ldr	r4, [r5]
  97:USER/src/sys.c **** 
 431              		.loc 1 97 23 view .LVU129
 432 0062 0443     		orrs	r4, r4, r0
 433 0064 2C60     		str	r4, [r5]
  99:USER/src/sys.c **** 
 434              		.loc 1 99 13 is_stmt 1 view .LVU130
  99:USER/src/sys.c **** 
 435              		.loc 1 99 16 is_stmt 0 view .LVU131
 436 0066 12F0010F 		tst	r2, #1
 437 006a 02D0     		beq	.L21
  99:USER/src/sys.c **** 
 438              		.loc 1 99 31 is_stmt 1 discriminator 1 view .LVU132
  99:USER/src/sys.c **** 
 439              		.loc 1 99 35 is_stmt 0 discriminator 1 view .LVU133
 440 006c EC68     		ldr	r4, [r5, #12]
  99:USER/src/sys.c **** 
 441              		.loc 1 99 42 discriminator 1 view .LVU134
 442 006e 0443     		orrs	r4, r4, r0
 443 0070 EC60     		str	r4, [r5, #12]
 444              	.L21:
 101:USER/src/sys.c ****         }
 445              		.loc 1 101 13 is_stmt 1 view .LVU135
 101:USER/src/sys.c ****         }
 446              		.loc 1 101 16 is_stmt 0 view .LVU136
 447 0072 12F0020F 		tst	r2, #2
 448 0076 D0D0     		beq	.L20
 101:USER/src/sys.c ****         }
 449              		.loc 1 101 31 is_stmt 1 discriminator 1 view .LVU137
 101:USER/src/sys.c ****         }
 450              		.loc 1 101 35 is_stmt 0 discriminator 1 view .LVU138
 451 0078 044D     		ldr	r5, .L25+8
 452 007a AC68     		ldr	r4, [r5, #8]
 101:USER/src/sys.c ****         }
 453              		.loc 1 101 42 discriminator 1 view .LVU139
 454 007c 2043     		orrs	r0, r0, r4
 455              	.LVL31:
 101:USER/src/sys.c ****         }
 456              		.loc 1 101 42 discriminator 1 view .LVU140
 457 007e A860     		str	r0, [r5, #8]
 458 0080 CBE7     		b	.L20
 459              	.LVL32:
 460              	.L24:
 104:USER/src/sys.c **** 
 461              		.loc 1 104 1 view .LVU141
 462 0082 F0BD     		pop	{r4, r5, r6, r7, pc}
 463              	.LVL33:
 464              	.L26:
 104:USER/src/sys.c **** 
 465              		.loc 1 104 1 view .LVU142
 466              		.align	2
 467              	.L25:
ARM GAS  /tmp/ccJ1tDPK.s 			page 17


 468 0084 00100240 		.word	1073876992
 469 0088 00000140 		.word	1073807360
 470 008c 00040140 		.word	1073808384
 471              		.cfi_endproc
 472              	.LFE68:
 474              		.section	.text.sys_gpio_remap_set,"ax",%progbits
 475              		.align	1
 476              		.global	sys_gpio_remap_set
 477              		.syntax unified
 478              		.thumb
 479              		.thumb_func
 481              	sys_gpio_remap_set:
 482              	.LVL34:
 483              	.LFB69:
 122:USER/src/sys.c ****     uint32_t temp = 0;
 484              		.loc 1 122 1 is_stmt 1 view -0
 485              		.cfi_startproc
 486              		@ args = 0, pretend = 0, frame = 0
 487              		@ frame_needed = 0, uses_anonymous_args = 0
 488              		@ link register save eliminated.
 122:USER/src/sys.c ****     uint32_t temp = 0;
 489              		.loc 1 122 1 is_stmt 0 view .LVU144
 490 0000 10B4     		push	{r4}
 491              	.LCFI2:
 492              		.cfi_def_cfa_offset 4
 493              		.cfi_offset 4, -4
 123:USER/src/sys.c ****     uint8_t i = 0;
 494              		.loc 1 123 5 is_stmt 1 view .LVU145
 495              	.LVL35:
 124:USER/src/sys.c ****     RCC->APB2ENR |= 1 << 0;     /* ø™∆Ù∏®÷˙ ±÷” */
 496              		.loc 1 124 5 view .LVU146
 125:USER/src/sys.c **** 
 497              		.loc 1 125 5 view .LVU147
 125:USER/src/sys.c **** 
 498              		.loc 1 125 8 is_stmt 0 view .LVU148
 499 0002 0E4C     		ldr	r4, .L31
 500 0004 A369     		ldr	r3, [r4, #24]
 125:USER/src/sys.c **** 
 501              		.loc 1 125 18 view .LVU149
 502 0006 43F00103 		orr	r3, r3, #1
 503 000a A361     		str	r3, [r4, #24]
 127:USER/src/sys.c ****     {
 504              		.loc 1 127 5 is_stmt 1 view .LVU150
 127:USER/src/sys.c ****     {
 505              		.loc 1 127 12 is_stmt 0 view .LVU151
 506 000c 0023     		movs	r3, #0
 123:USER/src/sys.c ****     uint8_t i = 0;
 507              		.loc 1 123 14 view .LVU152
 508 000e 9C46     		mov	ip, r3
 127:USER/src/sys.c ****     {
 509              		.loc 1 127 5 view .LVU153
 510 0010 05E0     		b	.L28
 511              	.LVL36:
 512              	.L29:
 129:USER/src/sys.c ****         temp += 1;
 513              		.loc 1 129 9 is_stmt 1 discriminator 3 view .LVU154
 129:USER/src/sys.c ****         temp += 1;
ARM GAS  /tmp/ccJ1tDPK.s 			page 18


 514              		.loc 1 129 14 is_stmt 0 discriminator 3 view .LVU155
 515 0012 4FEA4C0C 		lsl	ip, ip, #1
 516              	.LVL37:
 130:USER/src/sys.c ****     }
 517              		.loc 1 130 9 is_stmt 1 discriminator 3 view .LVU156
 130:USER/src/sys.c ****     }
 518              		.loc 1 130 14 is_stmt 0 discriminator 3 view .LVU157
 519 0016 0CF1010C 		add	ip, ip, #1
 520              	.LVL38:
 127:USER/src/sys.c ****     {
 521              		.loc 1 127 27 is_stmt 1 discriminator 3 view .LVU158
 522 001a 0133     		adds	r3, r3, #1
 523              	.LVL39:
 127:USER/src/sys.c ****     {
 524              		.loc 1 127 27 is_stmt 0 discriminator 3 view .LVU159
 525 001c DBB2     		uxtb	r3, r3
 526              	.LVL40:
 527              	.L28:
 127:USER/src/sys.c ****     {
 528              		.loc 1 127 19 is_stmt 1 discriminator 1 view .LVU160
 529 001e 8B42     		cmp	r3, r1
 530 0020 F7D3     		bcc	.L29
 133:USER/src/sys.c ****     AFIO->MAPR |= (uint32_t)val << pos; /* …Ë÷√MAPR∂‘”¶Œª÷√µƒ÷µ */
 531              		.loc 1 133 5 view .LVU161
 133:USER/src/sys.c ****     AFIO->MAPR |= (uint32_t)val << pos; /* …Ë÷√MAPR∂‘”¶Œª÷√µƒ÷µ */
 532              		.loc 1 133 9 is_stmt 0 view .LVU162
 533 0022 074B     		ldr	r3, .L31+4
 534              	.LVL41:
 133:USER/src/sys.c ****     AFIO->MAPR |= (uint32_t)val << pos; /* …Ë÷√MAPR∂‘”¶Œª÷√µƒ÷µ */
 535              		.loc 1 133 9 view .LVU163
 536 0024 5968     		ldr	r1, [r3, #4]
 537              	.LVL42:
 133:USER/src/sys.c ****     AFIO->MAPR |= (uint32_t)val << pos; /* …Ë÷√MAPR∂‘”¶Œª÷√µƒ÷µ */
 538              		.loc 1 133 26 view .LVU164
 539 0026 0CFA00FC 		lsl	ip, ip, r0
 540              	.LVL43:
 133:USER/src/sys.c ****     AFIO->MAPR |= (uint32_t)val << pos; /* …Ë÷√MAPR∂‘”¶Œª÷√µƒ÷µ */
 541              		.loc 1 133 16 view .LVU165
 542 002a 21EA0C01 		bic	r1, r1, ip
 543 002e 5960     		str	r1, [r3, #4]
 134:USER/src/sys.c **** }
 544              		.loc 1 134 5 is_stmt 1 view .LVU166
 134:USER/src/sys.c **** }
 545              		.loc 1 134 9 is_stmt 0 view .LVU167
 546 0030 5968     		ldr	r1, [r3, #4]
 134:USER/src/sys.c **** }
 547              		.loc 1 134 33 view .LVU168
 548 0032 8240     		lsls	r2, r2, r0
 549              	.LVL44:
 134:USER/src/sys.c **** }
 550              		.loc 1 134 16 view .LVU169
 551 0034 0A43     		orrs	r2, r2, r1
 552 0036 5A60     		str	r2, [r3, #4]
 135:USER/src/sys.c **** 
 553              		.loc 1 135 1 view .LVU170
 554 0038 10BC     		pop	{r4}
 555              	.LCFI3:
ARM GAS  /tmp/ccJ1tDPK.s 			page 19


 556              		.cfi_restore 4
 557              		.cfi_def_cfa_offset 0
 558 003a 7047     		bx	lr
 559              	.L32:
 560              		.align	2
 561              	.L31:
 562 003c 00100240 		.word	1073876992
 563 0040 00000140 		.word	1073807360
 564              		.cfi_endproc
 565              	.LFE69:
 567              		.section	.text.sys_gpio_set,"ax",%progbits
 568              		.align	1
 569              		.global	sys_gpio_set
 570              		.syntax unified
 571              		.thumb
 572              		.thumb_func
 574              	sys_gpio_set:
 575              	.LVL45:
 576              	.LFB70:
 170:USER/src/sys.c ****     uint32_t pinpos = 0, pos = 0, curpin = 0;
 577              		.loc 1 170 1 is_stmt 1 view -0
 578              		.cfi_startproc
 579              		@ args = 8, pretend = 0, frame = 0
 580              		@ frame_needed = 0, uses_anonymous_args = 0
 170:USER/src/sys.c ****     uint32_t pinpos = 0, pos = 0, curpin = 0;
 581              		.loc 1 170 1 is_stmt 0 view .LVU172
 582 0000 2DE9F041 		push	{r4, r5, r6, r7, r8, lr}
 583              	.LCFI4:
 584              		.cfi_def_cfa_offset 24
 585              		.cfi_offset 4, -24
 586              		.cfi_offset 5, -20
 587              		.cfi_offset 6, -16
 588              		.cfi_offset 7, -12
 589              		.cfi_offset 8, -8
 590              		.cfi_offset 14, -4
 591 0004 069E     		ldr	r6, [sp, #24]
 592 0006 079D     		ldr	r5, [sp, #28]
 171:USER/src/sys.c ****     uint32_t config = 0;        /* ”√”⁄±£¥Êƒ≥“ª∏ˆIOµƒ…Ë÷√(CNF[1:0] + MODE[1:0]),÷ª”√¡À∆‰◊ÓµÕ4Œª */
 593              		.loc 1 171 5 is_stmt 1 view .LVU173
 594              	.LVL46:
 172:USER/src/sys.c **** 
 595              		.loc 1 172 5 view .LVU174
 174:USER/src/sys.c ****     {
 596              		.loc 1 174 5 view .LVU175
 174:USER/src/sys.c ****     {
 597              		.loc 1 174 17 is_stmt 0 view .LVU176
 598 0008 4FF0000C 		mov	ip, #0
 174:USER/src/sys.c ****     {
 599              		.loc 1 174 5 view .LVU177
 600 000c 1DE0     		b	.L34
 601              	.LVL47:
 602              	.L44:
 185:USER/src/sys.c ****                 config |= (otype & 0X01) << 2;      /* …Ë÷√bit2   CNF[0]    = 0/1   Õ∆ÕÏ/ø™¬© ‰≥ˆ *
 603              		.loc 1 185 17 is_stmt 1 view .LVU178
 185:USER/src/sys.c ****                 config |= (otype & 0X01) << 2;      /* …Ë÷√bit2   CNF[0]    = 0/1   Õ∆ÕÏ/ø™¬© ‰≥ˆ *
 604              		.loc 1 185 24 is_stmt 0 view .LVU179
 605 000e 06F00307 		and	r7, r6, #3
ARM GAS  /tmp/ccJ1tDPK.s 			page 20


 606              	.LVL48:
 186:USER/src/sys.c ****                 config |= (mode - 1) << 3;          /* …Ë÷√bit3   CNF[1]    = 0/1   ∆’Õ®/∏¥”√ ‰≥ˆ *
 607              		.loc 1 186 17 is_stmt 1 view .LVU180
 186:USER/src/sys.c ****                 config |= (mode - 1) << 3;          /* …Ë÷√bit3   CNF[1]    = 0/1   ∆’Õ®/∏¥”√ ‰≥ˆ *
 608              		.loc 1 186 42 is_stmt 0 view .LVU181
 609 0012 4FEA830E 		lsl	lr, r3, #2
 610              	.LVL49:
 186:USER/src/sys.c ****                 config |= (mode - 1) << 3;          /* …Ë÷√bit3   CNF[1]    = 0/1   ∆’Õ®/∏¥”√ ‰≥ˆ *
 611              		.loc 1 186 42 view .LVU182
 612 0016 0EF0040E 		and	lr, lr, #4
 186:USER/src/sys.c ****                 config |= (mode - 1) << 3;          /* …Ë÷√bit3   CNF[1]    = 0/1   ∆’Õ®/∏¥”√ ‰≥ˆ *
 613              		.loc 1 186 24 view .LVU183
 614 001a 4EEA070E 		orr	lr, lr, r7
 615              	.LVL50:
 187:USER/src/sys.c ****             }
 616              		.loc 1 187 17 is_stmt 1 view .LVU184
 187:USER/src/sys.c ****             }
 617              		.loc 1 187 24 is_stmt 0 view .LVU185
 618 001e 4EEAC40E 		orr	lr, lr, r4, lsl #3
 619              	.LVL51:
 620              	.L37:
 204:USER/src/sys.c ****             {
 621              		.loc 1 204 13 is_stmt 1 view .LVU186
 204:USER/src/sys.c ****             {
 622              		.loc 1 204 16 is_stmt 0 view .LVU187
 623 0022 BCF1070F 		cmp	ip, #7
 624 0026 33D8     		bhi	.L38
 206:USER/src/sys.c ****                 p_gpiox->CRL |= config << (pinpos * 4);         /* …Ë÷√CNFx[1:0] ∫Õ MODEx[1:0], x =
 625              		.loc 1 206 17 is_stmt 1 view .LVU188
 206:USER/src/sys.c ****                 p_gpiox->CRL |= config << (pinpos * 4);         /* …Ë÷√CNFx[1:0] ∫Õ MODEx[1:0], x =
 626              		.loc 1 206 24 is_stmt 0 view .LVU189
 627 0028 0768     		ldr	r7, [r0]
 206:USER/src/sys.c ****                 p_gpiox->CRL |= config << (pinpos * 4);         /* …Ë÷√CNFx[1:0] ∫Õ MODEx[1:0], x =
 628              		.loc 1 206 51 view .LVU190
 629 002a 4FEA8C04 		lsl	r4, ip, #2
 206:USER/src/sys.c ****                 p_gpiox->CRL |= config << (pinpos * 4);         /* …Ë÷√CNFx[1:0] ∫Õ MODEx[1:0], x =
 630              		.loc 1 206 40 view .LVU191
 631 002e 4FF00F08 		mov	r8, #15
 632 0032 08FA04F8 		lsl	r8, r8, r4
 206:USER/src/sys.c ****                 p_gpiox->CRL |= config << (pinpos * 4);         /* …Ë÷√CNFx[1:0] ∫Õ MODEx[1:0], x =
 633              		.loc 1 206 30 view .LVU192
 634 0036 27EA0807 		bic	r7, r7, r8
 635 003a 0760     		str	r7, [r0]
 207:USER/src/sys.c ****             }
 636              		.loc 1 207 17 is_stmt 1 view .LVU193
 207:USER/src/sys.c ****             }
 637              		.loc 1 207 24 is_stmt 0 view .LVU194
 638 003c 0768     		ldr	r7, [r0]
 207:USER/src/sys.c ****             }
 639              		.loc 1 207 40 view .LVU195
 640 003e 0EFA04F4 		lsl	r4, lr, r4
 207:USER/src/sys.c ****             }
 641              		.loc 1 207 30 view .LVU196
 642 0042 3C43     		orrs	r4, r4, r7
 643 0044 0460     		str	r4, [r0]
 644              	.LVL52:
 645              	.L35:
ARM GAS  /tmp/ccJ1tDPK.s 			page 21


 174:USER/src/sys.c ****     {
 646              		.loc 1 174 41 is_stmt 1 discriminator 2 view .LVU197
 647 0046 0CF1010C 		add	ip, ip, #1
 648              	.LVL53:
 649              	.L34:
 174:USER/src/sys.c ****     {
 650              		.loc 1 174 29 discriminator 1 view .LVU198
 651 004a BCF10F0F 		cmp	ip, #15
 652 004e 31D8     		bhi	.L43
 176:USER/src/sys.c ****         curpin = pinx & pos;    /* ºÏ≤È“˝Ω≈ «∑Ò“™…Ë÷√ */
 653              		.loc 1 176 9 view .LVU199
 176:USER/src/sys.c ****         curpin = pinx & pos;    /* ºÏ≤È“˝Ω≈ «∑Ò“™…Ë÷√ */
 654              		.loc 1 176 17 is_stmt 0 view .LVU200
 655 0050 4FF0010E 		mov	lr, #1
 656 0054 0EFA0CFE 		lsl	lr, lr, ip
 657              	.LVL54:
 177:USER/src/sys.c **** 
 658              		.loc 1 177 9 is_stmt 1 view .LVU201
 179:USER/src/sys.c ****         {
 659              		.loc 1 179 9 view .LVU202
 179:USER/src/sys.c ****         {
 660              		.loc 1 179 12 is_stmt 0 view .LVU203
 661 0058 3EEA0104 		bics	r4, lr, r1
 662 005c F3D1     		bne	.L35
 181:USER/src/sys.c **** 
 663              		.loc 1 181 13 is_stmt 1 view .LVU204
 664              	.LVL55:
 183:USER/src/sys.c ****             {
 665              		.loc 1 183 13 view .LVU205
 183:USER/src/sys.c ****             {
 666              		.loc 1 183 32 is_stmt 0 view .LVU206
 667 005e 541E     		subs	r4, r2, #1
 183:USER/src/sys.c ****             {
 668              		.loc 1 183 16 view .LVU207
 669 0060 012C     		cmp	r4, #1
 670 0062 D4D9     		bls	.L44
 189:USER/src/sys.c ****             {
 671              		.loc 1 189 18 is_stmt 1 view .LVU208
 189:USER/src/sys.c ****             {
 672              		.loc 1 189 21 is_stmt 0 view .LVU209
 673 0064 72B9     		cbnz	r2, .L40
 191:USER/src/sys.c ****                 {
 674              		.loc 1 191 17 is_stmt 1 view .LVU210
 191:USER/src/sys.c ****                 {
 675              		.loc 1 191 20 is_stmt 0 view .LVU211
 676 0066 85B1     		cbz	r5, .L41
 197:USER/src/sys.c ****                     p_gpiox->ODR &= ~(1 << pinpos);             /* «Â≥˝‘≠¿¥µƒ…Ë÷√ */
 677              		.loc 1 197 21 is_stmt 1 view .LVU212
 678              	.LVL56:
 198:USER/src/sys.c ****                     p_gpiox->ODR |= (pupd & 0X01) << pinpos;    /* …Ë÷√ODR = 0/1 œ¬¿≠/…œ¿≠ */
 679              		.loc 1 198 21 view .LVU213
 198:USER/src/sys.c ****                     p_gpiox->ODR |= (pupd & 0X01) << pinpos;    /* …Ë÷√ODR = 0/1 œ¬¿≠/…œ¿≠ */
 680              		.loc 1 198 28 is_stmt 0 view .LVU214
 681 0068 C468     		ldr	r4, [r0, #12]
 198:USER/src/sys.c ****                     p_gpiox->ODR |= (pupd & 0X01) << pinpos;    /* …Ë÷√ODR = 0/1 œ¬¿≠/…œ¿≠ */
 682              		.loc 1 198 34 view .LVU215
 683 006a 24EA0E04 		bic	r4, r4, lr
ARM GAS  /tmp/ccJ1tDPK.s 			page 22


 684 006e C460     		str	r4, [r0, #12]
 199:USER/src/sys.c ****                 }
 685              		.loc 1 199 21 is_stmt 1 view .LVU216
 199:USER/src/sys.c ****                 }
 686              		.loc 1 199 28 is_stmt 0 view .LVU217
 687 0070 C468     		ldr	r4, [r0, #12]
 199:USER/src/sys.c ****                 }
 688              		.loc 1 199 43 view .LVU218
 689 0072 05F00107 		and	r7, r5, #1
 199:USER/src/sys.c ****                 }
 690              		.loc 1 199 51 view .LVU219
 691 0076 07FA0CF7 		lsl	r7, r7, ip
 199:USER/src/sys.c ****                 }
 692              		.loc 1 199 34 view .LVU220
 693 007a 3C43     		orrs	r4, r4, r7
 694 007c C460     		str	r4, [r0, #12]
 197:USER/src/sys.c ****                     p_gpiox->ODR &= ~(1 << pinpos);             /* «Â≥˝‘≠¿¥µƒ…Ë÷√ */
 695              		.loc 1 197 28 view .LVU221
 696 007e 4FF0080E 		mov	lr, #8
 697              	.LVL57:
 197:USER/src/sys.c ****                     p_gpiox->ODR &= ~(1 << pinpos);             /* «Â≥˝‘≠¿¥µƒ…Ë÷√ */
 698              		.loc 1 197 28 view .LVU222
 699 0082 CEE7     		b	.L37
 700              	.LVL58:
 701              	.L40:
 181:USER/src/sys.c **** 
 702              		.loc 1 181 20 view .LVU223
 703 0084 4FF0000E 		mov	lr, #0
 704              	.LVL59:
 181:USER/src/sys.c **** 
 705              		.loc 1 181 20 view .LVU224
 706 0088 CBE7     		b	.L37
 707              	.LVL60:
 708              	.L41:
 193:USER/src/sys.c ****                 }
 709              		.loc 1 193 28 view .LVU225
 710 008a 4FF0040E 		mov	lr, #4
 711              	.LVL61:
 193:USER/src/sys.c ****                 }
 712              		.loc 1 193 28 view .LVU226
 713 008e C8E7     		b	.L37
 714              	.LVL62:
 715              	.L38:
 211:USER/src/sys.c ****                 p_gpiox->CRH |= config << ((pinpos - 8) * 4);   /* …Ë÷√CNFx[1:0] ∫Õ MODEx[1:0], x =
 716              		.loc 1 211 17 is_stmt 1 view .LVU227
 211:USER/src/sys.c ****                 p_gpiox->CRH |= config << ((pinpos - 8) * 4);   /* …Ë÷√CNFx[1:0] ∫Õ MODEx[1:0], x =
 717              		.loc 1 211 24 is_stmt 0 view .LVU228
 718 0090 4768     		ldr	r7, [r0, #4]
 211:USER/src/sys.c ****                 p_gpiox->CRH |= config << ((pinpos - 8) * 4);   /* …Ë÷√CNFx[1:0] ∫Õ MODEx[1:0], x =
 719              		.loc 1 211 52 view .LVU229
 720 0092 ACF10804 		sub	r4, ip, #8
 211:USER/src/sys.c ****                 p_gpiox->CRH |= config << ((pinpos - 8) * 4);   /* …Ë÷√CNFx[1:0] ∫Õ MODEx[1:0], x =
 721              		.loc 1 211 57 view .LVU230
 722 0096 A400     		lsls	r4, r4, #2
 211:USER/src/sys.c ****                 p_gpiox->CRH |= config << ((pinpos - 8) * 4);   /* …Ë÷√CNFx[1:0] ∫Õ MODEx[1:0], x =
 723              		.loc 1 211 40 view .LVU231
 724 0098 4FF00F08 		mov	r8, #15
ARM GAS  /tmp/ccJ1tDPK.s 			page 23


 725 009c 08FA04F8 		lsl	r8, r8, r4
 211:USER/src/sys.c ****                 p_gpiox->CRH |= config << ((pinpos - 8) * 4);   /* …Ë÷√CNFx[1:0] ∫Õ MODEx[1:0], x =
 726              		.loc 1 211 30 view .LVU232
 727 00a0 27EA0807 		bic	r7, r7, r8
 728 00a4 4760     		str	r7, [r0, #4]
 212:USER/src/sys.c **** 
 729              		.loc 1 212 17 is_stmt 1 view .LVU233
 212:USER/src/sys.c **** 
 730              		.loc 1 212 24 is_stmt 0 view .LVU234
 731 00a6 4768     		ldr	r7, [r0, #4]
 212:USER/src/sys.c **** 
 732              		.loc 1 212 40 view .LVU235
 733 00a8 0EFA04FE 		lsl	lr, lr, r4
 734              	.LVL63:
 212:USER/src/sys.c **** 
 735              		.loc 1 212 30 view .LVU236
 736 00ac 47EA0E07 		orr	r7, r7, lr
 737 00b0 4760     		str	r7, [r0, #4]
 738 00b2 C8E7     		b	.L35
 739              	.LVL64:
 740              	.L43:
 217:USER/src/sys.c **** 
 741              		.loc 1 217 1 view .LVU237
 742 00b4 BDE8F081 		pop	{r4, r5, r6, r7, r8, pc}
 217:USER/src/sys.c **** 
 743              		.loc 1 217 1 view .LVU238
 744              		.cfi_endproc
 745              	.LFE70:
 747              		.section	.text.sys_gpio_pin_set,"ax",%progbits
 748              		.align	1
 749              		.global	sys_gpio_pin_set
 750              		.syntax unified
 751              		.thumb
 752              		.thumb_func
 754              	sys_gpio_pin_set:
 755              	.LVL65:
 756              	.LFB71:
 230:USER/src/sys.c ****     if (status & 0X01)
 757              		.loc 1 230 1 is_stmt 1 view -0
 758              		.cfi_startproc
 759              		@ args = 0, pretend = 0, frame = 0
 760              		@ frame_needed = 0, uses_anonymous_args = 0
 761              		@ link register save eliminated.
 231:USER/src/sys.c ****     {
 762              		.loc 1 231 5 view .LVU240
 231:USER/src/sys.c ****     {
 763              		.loc 1 231 8 is_stmt 0 view .LVU241
 764 0000 12F0010F 		tst	r2, #1
 765 0004 03D0     		beq	.L46
 233:USER/src/sys.c ****     }
 766              		.loc 1 233 9 is_stmt 1 view .LVU242
 233:USER/src/sys.c ****     }
 767              		.loc 1 233 16 is_stmt 0 view .LVU243
 768 0006 0369     		ldr	r3, [r0, #16]
 233:USER/src/sys.c ****     }
 769              		.loc 1 233 23 view .LVU244
 770 0008 1943     		orrs	r1, r1, r3
ARM GAS  /tmp/ccJ1tDPK.s 			page 24


 771              	.LVL66:
 233:USER/src/sys.c ****     }
 772              		.loc 1 233 23 view .LVU245
 773 000a 0161     		str	r1, [r0, #16]
 774 000c 7047     		bx	lr
 775              	.LVL67:
 776              	.L46:
 237:USER/src/sys.c ****     }
 777              		.loc 1 237 9 is_stmt 1 view .LVU246
 237:USER/src/sys.c ****     }
 778              		.loc 1 237 16 is_stmt 0 view .LVU247
 779 000e 0369     		ldr	r3, [r0, #16]
 237:USER/src/sys.c ****     }
 780              		.loc 1 237 23 view .LVU248
 781 0010 43EA0143 		orr	r3, r3, r1, lsl #16
 782 0014 0361     		str	r3, [r0, #16]
 239:USER/src/sys.c **** 
 783              		.loc 1 239 1 view .LVU249
 784 0016 7047     		bx	lr
 785              		.cfi_endproc
 786              	.LFE71:
 788              		.section	.text.sys_gpio_pin_get,"ax",%progbits
 789              		.align	1
 790              		.global	sys_gpio_pin_get
 791              		.syntax unified
 792              		.thumb
 793              		.thumb_func
 795              	sys_gpio_pin_get:
 796              	.LVL68:
 797              	.LFB72:
 249:USER/src/sys.c ****     if (p_gpiox->IDR & pinx)
 798              		.loc 1 249 1 is_stmt 1 view -0
 799              		.cfi_startproc
 800              		@ args = 0, pretend = 0, frame = 0
 801              		@ frame_needed = 0, uses_anonymous_args = 0
 802              		@ link register save eliminated.
 250:USER/src/sys.c ****     {
 803              		.loc 1 250 5 view .LVU251
 250:USER/src/sys.c ****     {
 804              		.loc 1 250 16 is_stmt 0 view .LVU252
 805 0000 8368     		ldr	r3, [r0, #8]
 250:USER/src/sys.c ****     {
 806              		.loc 1 250 8 view .LVU253
 807 0002 1942     		tst	r1, r3
 808 0004 01D0     		beq	.L50
 252:USER/src/sys.c ****     }
 809              		.loc 1 252 16 view .LVU254
 810 0006 0120     		movs	r0, #1
 811              	.LVL69:
 252:USER/src/sys.c ****     }
 812              		.loc 1 252 16 view .LVU255
 813 0008 7047     		bx	lr
 814              	.LVL70:
 815              	.L50:
 256:USER/src/sys.c ****     }
 816              		.loc 1 256 16 view .LVU256
 817 000a 0020     		movs	r0, #0
ARM GAS  /tmp/ccJ1tDPK.s 			page 25


 818              	.LVL71:
 258:USER/src/sys.c **** 
 819              		.loc 1 258 1 view .LVU257
 820 000c 7047     		bx	lr
 821              		.cfi_endproc
 822              	.LFE72:
 824              		.section	.text.sys_standby,"ax",%progbits
 825              		.align	1
 826              		.global	sys_standby
 827              		.syntax unified
 828              		.thumb
 829              		.thumb_func
 831              	sys_standby:
 832              	.LFB73:
 266:USER/src/sys.c ****     RCC->APB1ENR |= 1 << 28;    /*  πƒ‹µÁ‘¥ ±÷” */
 833              		.loc 1 266 1 is_stmt 1 view -0
 834              		.cfi_startproc
 835              		@ args = 0, pretend = 0, frame = 0
 836              		@ frame_needed = 0, uses_anonymous_args = 0
 837 0000 08B5     		push	{r3, lr}
 838              	.LCFI5:
 839              		.cfi_def_cfa_offset 8
 840              		.cfi_offset 3, -8
 841              		.cfi_offset 14, -4
 267:USER/src/sys.c ****     PWR->CSR |= 1 << 8;         /* …Ë÷√WKUP”√”⁄ªΩ–— */
 842              		.loc 1 267 5 view .LVU259
 267:USER/src/sys.c ****     PWR->CSR |= 1 << 8;         /* …Ë÷√WKUP”√”⁄ªΩ–— */
 843              		.loc 1 267 8 is_stmt 0 view .LVU260
 844 0002 0D4A     		ldr	r2, .L53
 845 0004 D369     		ldr	r3, [r2, #28]
 267:USER/src/sys.c ****     PWR->CSR |= 1 << 8;         /* …Ë÷√WKUP”√”⁄ªΩ–— */
 846              		.loc 1 267 18 view .LVU261
 847 0006 43F08053 		orr	r3, r3, #268435456
 848 000a D361     		str	r3, [r2, #28]
 268:USER/src/sys.c ****     PWR->CR |= 1 << 2;          /* «Â≥˝WKUP ±Í÷æ */
 849              		.loc 1 268 5 is_stmt 1 view .LVU262
 268:USER/src/sys.c ****     PWR->CR |= 1 << 2;          /* «Â≥˝WKUP ±Í÷æ */
 850              		.loc 1 268 8 is_stmt 0 view .LVU263
 851 000c 0B4B     		ldr	r3, .L53+4
 852 000e 5A68     		ldr	r2, [r3, #4]
 268:USER/src/sys.c ****     PWR->CR |= 1 << 2;          /* «Â≥˝WKUP ±Í÷æ */
 853              		.loc 1 268 14 view .LVU264
 854 0010 42F48072 		orr	r2, r2, #256
 855 0014 5A60     		str	r2, [r3, #4]
 269:USER/src/sys.c ****     PWR->CR |= 1 << 1;          /* PDDS = 1, ‘ –ÌΩ¯»Î…Ó∂»ÀØ√ﬂƒ£ Ω(PDDS) */
 856              		.loc 1 269 5 is_stmt 1 view .LVU265
 269:USER/src/sys.c ****     PWR->CR |= 1 << 1;          /* PDDS = 1, ‘ –ÌΩ¯»Î…Ó∂»ÀØ√ﬂƒ£ Ω(PDDS) */
 857              		.loc 1 269 8 is_stmt 0 view .LVU266
 858 0016 1A68     		ldr	r2, [r3]
 269:USER/src/sys.c ****     PWR->CR |= 1 << 1;          /* PDDS = 1, ‘ –ÌΩ¯»Î…Ó∂»ÀØ√ﬂƒ£ Ω(PDDS) */
 859              		.loc 1 269 13 view .LVU267
 860 0018 42F00402 		orr	r2, r2, #4
 861 001c 1A60     		str	r2, [r3]
 270:USER/src/sys.c ****     SCB->SCR |= 1 << 2;         /*  πƒ‹SLEEPDEEPŒª (SYS->CTRL) */
 862              		.loc 1 270 5 is_stmt 1 view .LVU268
 270:USER/src/sys.c ****     SCB->SCR |= 1 << 2;         /*  πƒ‹SLEEPDEEPŒª (SYS->CTRL) */
 863              		.loc 1 270 8 is_stmt 0 view .LVU269
ARM GAS  /tmp/ccJ1tDPK.s 			page 26


 864 001e 1A68     		ldr	r2, [r3]
 270:USER/src/sys.c ****     SCB->SCR |= 1 << 2;         /*  πƒ‹SLEEPDEEPŒª (SYS->CTRL) */
 865              		.loc 1 270 13 view .LVU270
 866 0020 42F00202 		orr	r2, r2, #2
 867 0024 1A60     		str	r2, [r3]
 271:USER/src/sys.c ****     sys_wfi_set();              /* ÷¥––WFI÷∏¡Ó, Ω¯»Î¥˝ª˙ƒ£ Ω */
 868              		.loc 1 271 5 is_stmt 1 view .LVU271
 271:USER/src/sys.c ****     sys_wfi_set();              /* ÷¥––WFI÷∏¡Ó, Ω¯»Î¥˝ª˙ƒ£ Ω */
 869              		.loc 1 271 8 is_stmt 0 view .LVU272
 870 0026 064A     		ldr	r2, .L53+8
 871 0028 1369     		ldr	r3, [r2, #16]
 271:USER/src/sys.c ****     sys_wfi_set();              /* ÷¥––WFI÷∏¡Ó, Ω¯»Î¥˝ª˙ƒ£ Ω */
 872              		.loc 1 271 14 view .LVU273
 873 002a 43F00403 		orr	r3, r3, #4
 874 002e 1361     		str	r3, [r2, #16]
 272:USER/src/sys.c **** }
 875              		.loc 1 272 5 is_stmt 1 view .LVU274
 876 0030 FFF7FEFF 		bl	sys_wfi_set
 877              	.LVL72:
 273:USER/src/sys.c **** 
 878              		.loc 1 273 1 is_stmt 0 view .LVU275
 879 0034 08BD     		pop	{r3, pc}
 880              	.L54:
 881 0036 00BF     		.align	2
 882              	.L53:
 883 0038 00100240 		.word	1073876992
 884 003c 00700040 		.word	1073770496
 885 0040 00ED00E0 		.word	-536810240
 886              		.cfi_endproc
 887              	.LFE73:
 889              		.section	.text.sys_soft_reset,"ax",%progbits
 890              		.align	1
 891              		.global	sys_soft_reset
 892              		.syntax unified
 893              		.thumb
 894              		.thumb_func
 896              	sys_soft_reset:
 897              	.LFB74:
 281:USER/src/sys.c ****     SCB->AIRCR = 0X05FA0000 | (uint32_t)0x04;
 898              		.loc 1 281 1 is_stmt 1 view -0
 899              		.cfi_startproc
 900              		@ args = 0, pretend = 0, frame = 0
 901              		@ frame_needed = 0, uses_anonymous_args = 0
 902              		@ link register save eliminated.
 282:USER/src/sys.c **** }
 903              		.loc 1 282 5 view .LVU277
 282:USER/src/sys.c **** }
 904              		.loc 1 282 16 is_stmt 0 view .LVU278
 905 0000 014B     		ldr	r3, .L56
 906 0002 024A     		ldr	r2, .L56+4
 907 0004 DA60     		str	r2, [r3, #12]
 283:USER/src/sys.c **** 
 908              		.loc 1 283 1 view .LVU279
 909 0006 7047     		bx	lr
 910              	.L57:
 911              		.align	2
 912              	.L56:
ARM GAS  /tmp/ccJ1tDPK.s 			page 27


 913 0008 00ED00E0 		.word	-536810240
 914 000c 0400FA05 		.word	100270084
 915              		.cfi_endproc
 916              	.LFE74:
 918              		.section	.text.sys_stm32_clock_init,"ax",%progbits
 919              		.align	1
 920              		.global	sys_stm32_clock_init
 921              		.syntax unified
 922              		.thumb
 923              		.thumb_func
 925              	sys_stm32_clock_init:
 926              	.LVL73:
 927              	.LFB76:
 341:USER/src/sys.c ****     RCC->APB1RSTR = 0x00000000;     /* ∏¥ŒªΩ· ¯ */
 928              		.loc 1 341 1 is_stmt 1 view -0
 929              		.cfi_startproc
 930              		@ args = 0, pretend = 0, frame = 0
 931              		@ frame_needed = 0, uses_anonymous_args = 0
 341:USER/src/sys.c ****     RCC->APB1RSTR = 0x00000000;     /* ∏¥ŒªΩ· ¯ */
 932              		.loc 1 341 1 is_stmt 0 view .LVU281
 933 0000 10B5     		push	{r4, lr}
 934              	.LCFI6:
 935              		.cfi_def_cfa_offset 8
 936              		.cfi_offset 4, -8
 937              		.cfi_offset 14, -4
 342:USER/src/sys.c ****     RCC->APB2RSTR = 0x00000000;
 938              		.loc 1 342 5 is_stmt 1 view .LVU282
 342:USER/src/sys.c ****     RCC->APB2RSTR = 0x00000000;
 939              		.loc 1 342 19 is_stmt 0 view .LVU283
 940 0002 144B     		ldr	r3, .L60
 941 0004 0024     		movs	r4, #0
 942 0006 1C61     		str	r4, [r3, #16]
 343:USER/src/sys.c ****     
 943              		.loc 1 343 5 is_stmt 1 view .LVU284
 343:USER/src/sys.c ****     
 944              		.loc 1 343 19 is_stmt 0 view .LVU285
 945 0008 DC60     		str	r4, [r3, #12]
 346:USER/src/sys.c ****     RCC->APB2ENR = 0x00000000;      /* AHB2Õ‚…Ë ±÷”πÿ±’ */
 946              		.loc 1 346 5 is_stmt 1 view .LVU286
 346:USER/src/sys.c ****     RCC->APB2ENR = 0x00000000;      /* AHB2Õ‚…Ë ±÷”πÿ±’ */
 947              		.loc 1 346 17 is_stmt 0 view .LVU287
 948 000a 5C61     		str	r4, [r3, #20]
 347:USER/src/sys.c ****     RCC->APB1ENR = 0x00000000;
 949              		.loc 1 347 5 is_stmt 1 view .LVU288
 347:USER/src/sys.c ****     RCC->APB1ENR = 0x00000000;
 950              		.loc 1 347 18 is_stmt 0 view .LVU289
 951 000c 9C61     		str	r4, [r3, #24]
 348:USER/src/sys.c ****     
 952              		.loc 1 348 5 is_stmt 1 view .LVU290
 348:USER/src/sys.c ****     
 953              		.loc 1 348 18 is_stmt 0 view .LVU291
 954 000e DC61     		str	r4, [r3, #28]
 350:USER/src/sys.c ****     RCC->CFGR &= 0xF8FF0000;        /* ∏¥ŒªSW[1:0], SWS[1:0], HPRE[3:0], PPRE1[2:0], PPRE2[2:0], AD
 955              		.loc 1 350 5 is_stmt 1 view .LVU292
 350:USER/src/sys.c ****     RCC->CFGR &= 0xF8FF0000;        /* ∏¥ŒªSW[1:0], SWS[1:0], HPRE[3:0], PPRE1[2:0], PPRE2[2:0], AD
 956              		.loc 1 350 8 is_stmt 0 view .LVU293
 957 0010 1A68     		ldr	r2, [r3]
ARM GAS  /tmp/ccJ1tDPK.s 			page 28


 350:USER/src/sys.c ****     RCC->CFGR &= 0xF8FF0000;        /* ∏¥ŒªSW[1:0], SWS[1:0], HPRE[3:0], PPRE1[2:0], PPRE2[2:0], AD
 958              		.loc 1 350 13 view .LVU294
 959 0012 42F00102 		orr	r2, r2, #1
 960 0016 1A60     		str	r2, [r3]
 351:USER/src/sys.c ****     RCC->CR &= 0xFEF6FFFF;          /* ∏¥ŒªHSEON, CSSON, PLLON */
 961              		.loc 1 351 5 is_stmt 1 view .LVU295
 351:USER/src/sys.c ****     RCC->CR &= 0xFEF6FFFF;          /* ∏¥ŒªHSEON, CSSON, PLLON */
 962              		.loc 1 351 8 is_stmt 0 view .LVU296
 963 0018 5968     		ldr	r1, [r3, #4]
 351:USER/src/sys.c ****     RCC->CR &= 0xFEF6FFFF;          /* ∏¥ŒªHSEON, CSSON, PLLON */
 964              		.loc 1 351 15 view .LVU297
 965 001a 0F4A     		ldr	r2, .L60+4
 966 001c 0A40     		ands	r2, r2, r1
 967 001e 5A60     		str	r2, [r3, #4]
 352:USER/src/sys.c ****     RCC->CR &= 0xFFFBFFFF;          /* ∏¥ŒªHSEBYP */
 968              		.loc 1 352 5 is_stmt 1 view .LVU298
 352:USER/src/sys.c ****     RCC->CR &= 0xFFFBFFFF;          /* ∏¥ŒªHSEBYP */
 969              		.loc 1 352 8 is_stmt 0 view .LVU299
 970 0020 1A68     		ldr	r2, [r3]
 352:USER/src/sys.c ****     RCC->CR &= 0xFFFBFFFF;          /* ∏¥ŒªHSEBYP */
 971              		.loc 1 352 13 view .LVU300
 972 0022 22F08472 		bic	r2, r2, #17301504
 973 0026 22F48032 		bic	r2, r2, #65536
 974 002a 1A60     		str	r2, [r3]
 353:USER/src/sys.c ****     RCC->CFGR &= 0xFF80FFFF;        /* ∏¥ŒªPLLSRC, PLLXTPRE, PLLMUL[3:0] ∫Õ USBPRE/OTGFSPRE */
 975              		.loc 1 353 5 is_stmt 1 view .LVU301
 353:USER/src/sys.c ****     RCC->CFGR &= 0xFF80FFFF;        /* ∏¥ŒªPLLSRC, PLLXTPRE, PLLMUL[3:0] ∫Õ USBPRE/OTGFSPRE */
 976              		.loc 1 353 8 is_stmt 0 view .LVU302
 977 002c 1A68     		ldr	r2, [r3]
 353:USER/src/sys.c ****     RCC->CFGR &= 0xFF80FFFF;        /* ∏¥ŒªPLLSRC, PLLXTPRE, PLLMUL[3:0] ∫Õ USBPRE/OTGFSPRE */
 978              		.loc 1 353 13 view .LVU303
 979 002e 22F48022 		bic	r2, r2, #262144
 980 0032 1A60     		str	r2, [r3]
 354:USER/src/sys.c ****     RCC->CIR = 0x009F0000;          /* πÿ±’À˘”–RCC÷–∂œ≤¢«Â≥˝÷–∂œ±Í÷æ */
 981              		.loc 1 354 5 is_stmt 1 view .LVU304
 354:USER/src/sys.c ****     RCC->CIR = 0x009F0000;          /* πÿ±’À˘”–RCC÷–∂œ≤¢«Â≥˝÷–∂œ±Í÷æ */
 982              		.loc 1 354 8 is_stmt 0 view .LVU305
 983 0034 5A68     		ldr	r2, [r3, #4]
 354:USER/src/sys.c ****     RCC->CIR = 0x009F0000;          /* πÿ±’À˘”–RCC÷–∂œ≤¢«Â≥˝÷–∂œ±Í÷æ */
 984              		.loc 1 354 15 view .LVU306
 985 0036 22F4FE02 		bic	r2, r2, #8323072
 986 003a 5A60     		str	r2, [r3, #4]
 355:USER/src/sys.c **** 
 987              		.loc 1 355 5 is_stmt 1 view .LVU307
 355:USER/src/sys.c **** 
 988              		.loc 1 355 14 is_stmt 0 view .LVU308
 989 003c 4FF41F02 		mov	r2, #10420224
 990 0040 9A60     		str	r2, [r3, #8]
 357:USER/src/sys.c **** 
 991              		.loc 1 357 5 is_stmt 1 view .LVU309
 992 0042 FFF7FEFF 		bl	sys_clock_set
 993              	.LVL74:
 363:USER/src/sys.c **** #endif
 994              		.loc 1 363 5 view .LVU310
 995 0046 2146     		mov	r1, r4
 996 0048 4FF00060 		mov	r0, #134217728
 997 004c FFF7FEFF 		bl	sys_nvic_set_vector_table
ARM GAS  /tmp/ccJ1tDPK.s 			page 29


 998              	.LVL75:
 365:USER/src/sys.c **** 
 999              		.loc 1 365 1 is_stmt 0 view .LVU311
 1000 0050 10BD     		pop	{r4, pc}
 1001              	.L61:
 1002 0052 00BF     		.align	2
 1003              	.L60:
 1004 0054 00100240 		.word	1073876992
 1005 0058 0000FFF8 		.word	-117506048
 1006              		.cfi_endproc
 1007              	.LFE76:
 1009              		.text
 1010              	.Letext0:
 1011              		.file 2 "/opt/st/stm32cubeclt_1.16.0/GNU-tools-for-STM32/arm-none-eabi/include/machine/_default_ty
 1012              		.file 3 "/opt/st/stm32cubeclt_1.16.0/GNU-tools-for-STM32/arm-none-eabi/include/sys/_stdint.h"
 1013              		.file 4 "CMSIS/Include/core_cm3.h"
 1014              		.file 5 "CMSIS/Device/stm32f103xe.h"
ARM GAS  /tmp/ccJ1tDPK.s 			page 30


DEFINED SYMBOLS
                            *ABS*:00000000 sys.c
     /tmp/ccJ1tDPK.s:19     .text.sys_nvic_priority_group_config:00000000 $t
     /tmp/ccJ1tDPK.s:24     .text.sys_nvic_priority_group_config:00000000 sys_nvic_priority_group_config
     /tmp/ccJ1tDPK.s:76     .text.sys_nvic_priority_group_config:00000024 $d
     /tmp/ccJ1tDPK.s:81     .text.sys_clock_set:00000000 $t
     /tmp/ccJ1tDPK.s:86     .text.sys_clock_set:00000000 sys_clock_set
     /tmp/ccJ1tDPK.s:184    .text.sys_clock_set:00000068 $d
     /tmp/ccJ1tDPK.s:190    .text.sys_wfi_set:00000000 $t
     /tmp/ccJ1tDPK.s:195    .text.sys_wfi_set:00000000 sys_wfi_set
     /tmp/ccJ1tDPK.s:215    .text.sys_nvic_set_vector_table:00000000 $t
     /tmp/ccJ1tDPK.s:221    .text.sys_nvic_set_vector_table:00000000 sys_nvic_set_vector_table
     /tmp/ccJ1tDPK.s:245    .text.sys_nvic_set_vector_table:00000010 $d
     /tmp/ccJ1tDPK.s:250    .text.sys_nvic_init:00000000 $t
     /tmp/ccJ1tDPK.s:256    .text.sys_nvic_init:00000000 sys_nvic_init
     /tmp/ccJ1tDPK.s:329    .text.sys_nvic_init:0000004c $d
     /tmp/ccJ1tDPK.s:334    .text.sys_nvic_ex_config:00000000 $t
     /tmp/ccJ1tDPK.s:340    .text.sys_nvic_ex_config:00000000 sys_nvic_ex_config
     /tmp/ccJ1tDPK.s:468    .text.sys_nvic_ex_config:00000084 $d
     /tmp/ccJ1tDPK.s:475    .text.sys_gpio_remap_set:00000000 $t
     /tmp/ccJ1tDPK.s:481    .text.sys_gpio_remap_set:00000000 sys_gpio_remap_set
     /tmp/ccJ1tDPK.s:562    .text.sys_gpio_remap_set:0000003c $d
     /tmp/ccJ1tDPK.s:568    .text.sys_gpio_set:00000000 $t
     /tmp/ccJ1tDPK.s:574    .text.sys_gpio_set:00000000 sys_gpio_set
     /tmp/ccJ1tDPK.s:748    .text.sys_gpio_pin_set:00000000 $t
     /tmp/ccJ1tDPK.s:754    .text.sys_gpio_pin_set:00000000 sys_gpio_pin_set
     /tmp/ccJ1tDPK.s:789    .text.sys_gpio_pin_get:00000000 $t
     /tmp/ccJ1tDPK.s:795    .text.sys_gpio_pin_get:00000000 sys_gpio_pin_get
     /tmp/ccJ1tDPK.s:825    .text.sys_standby:00000000 $t
     /tmp/ccJ1tDPK.s:831    .text.sys_standby:00000000 sys_standby
     /tmp/ccJ1tDPK.s:883    .text.sys_standby:00000038 $d
     /tmp/ccJ1tDPK.s:890    .text.sys_soft_reset:00000000 $t
     /tmp/ccJ1tDPK.s:896    .text.sys_soft_reset:00000000 sys_soft_reset
     /tmp/ccJ1tDPK.s:913    .text.sys_soft_reset:00000008 $d
     /tmp/ccJ1tDPK.s:919    .text.sys_stm32_clock_init:00000000 $t
     /tmp/ccJ1tDPK.s:925    .text.sys_stm32_clock_init:00000000 sys_stm32_clock_init
     /tmp/ccJ1tDPK.s:1004   .text.sys_stm32_clock_init:00000054 $d

NO UNDEFINED SYMBOLS
