ARM GAS  /tmp/cc8lucvl.s 			page 1


   1              		.cpu cortex-m3
   2              		.arch armv7-m
   3              		.fpu softvfp
   4              		.eabi_attribute 20, 1
   5              		.eabi_attribute 21, 1
   6              		.eabi_attribute 23, 3
   7              		.eabi_attribute 24, 1
   8              		.eabi_attribute 25, 1
   9              		.eabi_attribute 26, 1
  10              		.eabi_attribute 30, 1
  11              		.eabi_attribute 34, 1
  12              		.eabi_attribute 18, 4
  13              		.file	"main.c"
  14              		.text
  15              	.Ltext0:
  16              		.cfi_sections	.debug_frame
  17              		.file 1 "Core/bsp/main.c"
  18              		.section	.rodata.main.str1.4,"aMS",%progbits,1
  19              		.align	2
  20              	.LC0:
  21 0000 74686520 		.ascii	"the message you send is:\000"
  21      6D657373 
  21      61676520 
  21      796F7520 
  21      73656E64 
  22              		.section	.text.main,"ax",%progbits
  23              		.align	1
  24              		.global	main
  25              		.syntax unified
  26              		.thumb
  27              		.thumb_func
  29              	main:
  30              	.LFB68:
   1:Core/bsp/main.c **** /**
   2:Core/bsp/main.c ****  **************************************************************************************************
   3:Core/bsp/main.c ****  * @file        main.c
   4:Core/bsp/main.c ****  * @author      正点原子团队(ALIENTEK)
   5:Core/bsp/main.c ****  * @version     V1.0
   6:Core/bsp/main.c ****  * @date        2020-04-19
   7:Core/bsp/main.c ****  * @brief       串口通信 实验
   8:Core/bsp/main.c ****  * @license     Copyright (c) 2020-2032, 广州市星翼电子科技有限公司
   9:Core/bsp/main.c ****  **************************************************************************************************
  10:Core/bsp/main.c ****  * @attention
  11:Core/bsp/main.c ****  *
  12:Core/bsp/main.c ****  * 实验平台:正点原子 STM32F103开发板
  13:Core/bsp/main.c ****  * 在线视频:www.yuanzige.com
  14:Core/bsp/main.c ****  * 技术论坛:www.openedv.com
  15:Core/bsp/main.c ****  * 公司网址:www.alientek.com
  16:Core/bsp/main.c ****  * 购买地址:openedv.taobao.com
  17:Core/bsp/main.c ****  *
  18:Core/bsp/main.c ****  **************************************************************************************************
  19:Core/bsp/main.c ****  */
  20:Core/bsp/main.c **** 
  21:Core/bsp/main.c **** #include "sys.h"
  22:Core/bsp/main.c **** #include "usart.h"
  23:Core/bsp/main.c **** #include "delay.h"
  24:Core/bsp/main.c **** #include "led.h"
ARM GAS  /tmp/cc8lucvl.s 			page 2


  25:Core/bsp/main.c **** 
  26:Core/bsp/main.c **** 
  27:Core/bsp/main.c **** int main(void)
  28:Core/bsp/main.c **** {
  31              		.loc 1 28 1 view -0
  32              		.cfi_startproc
  33              		@ args = 0, pretend = 0, frame = 0
  34              		@ frame_needed = 0, uses_anonymous_args = 0
  35 0000 38B5     		push	{r3, r4, r5, lr}
  36              	.LCFI0:
  37              		.cfi_def_cfa_offset 16
  38              		.cfi_offset 3, -16
  39              		.cfi_offset 4, -12
  40              		.cfi_offset 5, -8
  41              		.cfi_offset 14, -4
  29:Core/bsp/main.c ****     uint8_t t;
  42              		.loc 1 29 5 view .LVU1
  30:Core/bsp/main.c ****     uint8_t len;
  43              		.loc 1 30 5 view .LVU2
  31:Core/bsp/main.c ****     uint16_t times = 0;
  44              		.loc 1 31 5 view .LVU3
  45              	.LVL0:
  32:Core/bsp/main.c **** 
  33:Core/bsp/main.c ****     sys_stm32_clock_init(9);    /* 设置时钟, 72Mhz */
  46              		.loc 1 33 5 view .LVU4
  47 0002 0920     		movs	r0, #9
  48 0004 FFF7FEFF 		bl	sys_stm32_clock_init
  49              	.LVL1:
  34:Core/bsp/main.c ****     delay_init(72);             /* 延时初始化 */
  50              		.loc 1 34 5 view .LVU5
  51 0008 4820     		movs	r0, #72
  52 000a FFF7FEFF 		bl	delay_init
  53              	.LVL2:
  35:Core/bsp/main.c ****     usart_init(72, 115200);     /* 串口初始化为115200 */
  54              		.loc 1 35 5 view .LVU6
  55 000e 4FF4E131 		mov	r1, #115200
  56 0012 4820     		movs	r0, #72
  57 0014 FFF7FEFF 		bl	usart_init
  58              	.LVL3:
  36:Core/bsp/main.c ****     led_init();                 /* 初始化LED */
  59              		.loc 1 36 5 view .LVU7
  60 0018 FFF7FEFF 		bl	led_init
  61              	.LVL4:
  31:Core/bsp/main.c **** 
  62              		.loc 1 31 14 is_stmt 0 view .LVU8
  63 001c 0025     		movs	r5, #0
  64 001e 19E0     		b	.L2
  65              	.LVL5:
  66              	.L10:
  37:Core/bsp/main.c **** 
  38:Core/bsp/main.c ****     while (1)
  39:Core/bsp/main.c ****     {
  40:Core/bsp/main.c ****         if (g_usart_rx_sta & 0x8000)        /* 接收到了数据? */
  41:Core/bsp/main.c ****         {
  42:Core/bsp/main.c ****             len = g_usart_rx_sta & 0x3fff;  /* 得到此次接收到的数据长度 */
  67              		.loc 1 42 13 is_stmt 1 view .LVU9
  68              		.loc 1 42 17 is_stmt 0 view .LVU10
ARM GAS  /tmp/cc8lucvl.s 			page 3


  69 0020 E4B2     		uxtb	r4, r4
  70              	.LVL6:
  43:Core/bsp/main.c ****             printf("the message you send is:");
  71              		.loc 1 43 13 is_stmt 1 view .LVU11
  72 0022 1948     		ldr	r0, .L11
  73 0024 FFF7FEFF 		bl	printf
  74              	.LVL7:
  44:Core/bsp/main.c ****             for (t = 0; t < len; t++)
  75              		.loc 1 44 13 view .LVU12
  76              		.loc 1 44 20 is_stmt 0 view .LVU13
  77 0028 0022     		movs	r2, #0
  78              		.loc 1 44 13 view .LVU14
  79 002a 0AE0     		b	.L4
  80              	.LVL8:
  81              	.L6:
  45:Core/bsp/main.c ****             {
  46:Core/bsp/main.c ****                 USART_UX->DR = g_usart_rx_buf[t];
  82              		.loc 1 46 17 is_stmt 1 view .LVU15
  83              		.loc 1 46 46 is_stmt 0 view .LVU16
  84 002c 174B     		ldr	r3, .L11+4
  85 002e 995C     		ldrb	r1, [r3, r2]	@ zero_extendqisi2
  86              		.loc 1 46 30 view .LVU17
  87 0030 174B     		ldr	r3, .L11+8
  88 0032 5960     		str	r1, [r3, #4]
  47:Core/bsp/main.c ****                 while ((USART_UX->SR & 0X40) == 0); /* 等待发送结束 */
  89              		.loc 1 47 17 is_stmt 1 view .LVU18
  90              	.L5:
  91              		.loc 1 47 46 discriminator 1 view .LVU19
  92              		.loc 1 47 33 is_stmt 0 discriminator 1 view .LVU20
  93 0034 164B     		ldr	r3, .L11+8
  94 0036 1B68     		ldr	r3, [r3]
  95              		.loc 1 47 46 discriminator 1 view .LVU21
  96 0038 13F0400F 		tst	r3, #64
  97 003c FAD0     		beq	.L5
  44:Core/bsp/main.c ****             for (t = 0; t < len; t++)
  98              		.loc 1 44 35 is_stmt 1 discriminator 2 view .LVU22
  99 003e 0132     		adds	r2, r2, #1
 100              	.LVL9:
  44:Core/bsp/main.c ****             for (t = 0; t < len; t++)
 101              		.loc 1 44 35 is_stmt 0 discriminator 2 view .LVU23
 102 0040 D2B2     		uxtb	r2, r2
 103              	.LVL10:
 104              	.L4:
  44:Core/bsp/main.c ****             for (t = 0; t < len; t++)
 105              		.loc 1 44 27 is_stmt 1 discriminator 1 view .LVU24
 106 0042 A242     		cmp	r2, r4
 107 0044 F2D3     		bcc	.L6
  48:Core/bsp/main.c ****             }
  49:Core/bsp/main.c **** 
  50:Core/bsp/main.c ****             g_usart_rx_sta = 0;
 108              		.loc 1 50 13 view .LVU25
 109              		.loc 1 50 28 is_stmt 0 view .LVU26
 110 0046 134B     		ldr	r3, .L11+12
 111 0048 0022     		movs	r2, #0
 112              	.LVL11:
 113              		.loc 1 50 28 view .LVU27
 114 004a 1A80     		strh	r2, [r3]	@ movhi
ARM GAS  /tmp/cc8lucvl.s 			page 4


 115 004c 02E0     		b	.L2
 116              	.LVL12:
 117              	.L8:
  51:Core/bsp/main.c ****         }
  52:Core/bsp/main.c ****         else
  53:Core/bsp/main.c ****         {
  54:Core/bsp/main.c ****             times++;
  55:Core/bsp/main.c **** 
  56:Core/bsp/main.c ****             // if (times % 5000 == 0)
  57:Core/bsp/main.c ****             // {
  58:Core/bsp/main.c ****             //     printf("uart experiment");
  59:Core/bsp/main.c ****             // }
  60:Core/bsp/main.c **** 
  61:Core/bsp/main.c ****             // if (times % 200 == 0) printf("please input message");
  62:Core/bsp/main.c **** 
  63:Core/bsp/main.c ****             if (times % 30  == 0) LED0_TOGGLE(); /* 闪烁LED,提示系统正在运行. */
 118              		.loc 1 63 35 is_stmt 1 discriminator 3 view .LVU28
  64:Core/bsp/main.c **** 
  65:Core/bsp/main.c ****             delay_ms(10);
 119              		.loc 1 65 13 discriminator 3 view .LVU29
 120 004e 0A20     		movs	r0, #10
 121 0050 FFF7FEFF 		bl	delay_ms
 122              	.LVL13:
 123              	.L2:
  38:Core/bsp/main.c ****     {
 124              		.loc 1 38 5 view .LVU30
  40:Core/bsp/main.c ****         {
 125              		.loc 1 40 9 view .LVU31
  40:Core/bsp/main.c ****         {
 126              		.loc 1 40 13 is_stmt 0 view .LVU32
 127 0054 0F4B     		ldr	r3, .L11+12
 128 0056 1C88     		ldrh	r4, [r3]
 129 0058 B3F90030 		ldrsh	r3, [r3]
  40:Core/bsp/main.c ****         {
 130              		.loc 1 40 12 view .LVU33
 131 005c 002B     		cmp	r3, #0
 132 005e DFDB     		blt	.L10
  54:Core/bsp/main.c **** 
 133              		.loc 1 54 13 is_stmt 1 view .LVU34
  54:Core/bsp/main.c **** 
 134              		.loc 1 54 18 is_stmt 0 view .LVU35
 135 0060 0135     		adds	r5, r5, #1
 136              	.LVL14:
  54:Core/bsp/main.c **** 
 137              		.loc 1 54 18 view .LVU36
 138 0062 ADB2     		uxth	r5, r5
 139              	.LVL15:
  63:Core/bsp/main.c **** 
 140              		.loc 1 63 13 is_stmt 1 view .LVU37
  63:Core/bsp/main.c **** 
 141              		.loc 1 63 29 is_stmt 0 view .LVU38
 142 0064 0C4B     		ldr	r3, .L11+16
 143 0066 A3FB0523 		umull	r2, r3, r3, r5
 144 006a 23F00F02 		bic	r2, r3, #15
 145 006e A2EB1312 		sub	r2, r2, r3, lsr #4
 146 0072 5300     		lsls	r3, r2, #1
 147 0074 EB1A     		subs	r3, r5, r3
ARM GAS  /tmp/cc8lucvl.s 			page 5


 148 0076 9BB2     		uxth	r3, r3
  63:Core/bsp/main.c **** 
 149              		.loc 1 63 16 view .LVU39
 150 0078 002B     		cmp	r3, #0
 151 007a E8D1     		bne	.L8
  63:Core/bsp/main.c **** 
 152              		.loc 1 63 35 is_stmt 1 discriminator 1 view .LVU40
  63:Core/bsp/main.c **** 
 153              		.loc 1 63 35 discriminator 1 view .LVU41
 154 007c 074A     		ldr	r2, .L11+20
 155 007e D368     		ldr	r3, [r2, #12]
 156 0080 83F02003 		eor	r3, r3, #32
 157 0084 D360     		str	r3, [r2, #12]
 158 0086 E2E7     		b	.L8
 159              	.L12:
 160              		.align	2
 161              	.L11:
 162 0088 00000000 		.word	.LC0
 163 008c 00000000 		.word	g_usart_rx_buf
 164 0090 00380140 		.word	1073821696
 165 0094 00000000 		.word	g_usart_rx_sta
 166 0098 89888888 		.word	-2004318071
 167 009c 000C0140 		.word	1073810432
 168              		.cfi_endproc
 169              	.LFE68:
 171              		.text
 172              	.Letext0:
 173              		.file 2 "/opt/st/stm32cubeclt_1.16.0/GNU-tools-for-STM32/arm-none-eabi/include/machine/_default_ty
 174              		.file 3 "/opt/st/stm32cubeclt_1.16.0/GNU-tools-for-STM32/arm-none-eabi/include/sys/_stdint.h"
 175              		.file 4 "CMSIS/Device/stm32f103xe.h"
 176              		.file 5 "Core/system/usart.h"
 177              		.file 6 "Core/system/delay.h"
 178              		.file 7 "Core/system/sys.h"
 179              		.file 8 "/opt/st/stm32cubeclt_1.16.0/GNU-tools-for-STM32/arm-none-eabi/include/stdio.h"
 180              		.file 9 "Core/bsp/led.h"
ARM GAS  /tmp/cc8lucvl.s 			page 6


DEFINED SYMBOLS
                            *ABS*:00000000 main.c
     /tmp/cc8lucvl.s:19     .rodata.main.str1.4:00000000 $d
     /tmp/cc8lucvl.s:23     .text.main:00000000 $t
     /tmp/cc8lucvl.s:29     .text.main:00000000 main
     /tmp/cc8lucvl.s:162    .text.main:00000088 $d

UNDEFINED SYMBOLS
sys_stm32_clock_init
delay_init
usart_init
led_init
printf
delay_ms
g_usart_rx_buf
g_usart_rx_sta
